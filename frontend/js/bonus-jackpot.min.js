var Game=new Phaser.Game(1030,645,Phaser.AUTO,"content");if(WebFontConfig={active:function(){Game.add.text(0,28,"WAIT ...",{font:"bold 28px Arial",fill:"#FFFFFF"}),Game.time.events.add(Phaser.Timer.SECOND,function(){Game.add.text(0,56,"TITLE: "+Register.GAME_TITLE,{font:"28px Skranji",fill:"#ea134b"}),Game.add.text(0,84,"VERSION: "+Register.GAME_VRESION,{font:"28px Skranji",fill:"#ea134b"}),Game.add.text(0,112,"INITIALIZE OK",{font:"bold 28px Arial",fill:"#FFFFFF"}),Game.add.text(0,140,"START ASSET LOAD SEQUENCE",{font:"bold 28px Arial",fill:"#FFFFFF"}),setTimeout(function(){Game.state.start("Assets")},1e3)},this)},fontinactive:function(){var a=void 0===window.ontouchstart?"click":"touchstart";Game.add.text(0,28,"RESULT: NG - INTERNET CONNECTION TIMEOUT",{font:"bold 28px Arial",fill:"#FFFFFF"}),"touchstart"===a?Game.add.text(0,56,"TOUCH SCREEN TO REBOOT",{font:"bold 28px Arial",fill:"#FFFFFF"}):Game.add.text(0,56,"CLICK SCREEN TO REBOOT",{font:"bold 28px Arial",fill:"#FFFFFF"}),Game.canvas.addEventListener(a,function(){document.location.href=document.location.href})},google:{families:["Skranji:700","Josefin+Sans:700"]}},document.addEventListener("DOMContentLoaded",function(a){Game.state.add("Boot",Rom.boot),Game.state.add("Assets",Rom.assets),Game.state.add("LogoSplash",Rom.state.logoSplash),Game.state.add("TitleLoop",Rom.state.titleLoop),Game.state.add("GameLoop",Rom.state.game),Game.state.add("MenuLoop",Rom.state.menu),Game.state.add("Test",Rom.state.test),Game.state.start("Boot")}),!PCB)var PCB={};if(PCB.assets={addPreloadListners:function(a){Game.load.onLoadStart.add(a.loadStart,a),Game.load.onFileComplete.add(a.fileComplete,a),Game.load.onFileError.add(a.onFileError,this),Game.load.onLoadComplete.add(a.loadComplete,a)},removePreloadListners:function(){Game.load.onLoadStart.removeAll(),Game.load.onFileComplete.removeAll(),Game.load.onFileError.removeAll(),Game.load.onLoadComplete.removeAll()},enqueuePreloadAssets:function(a){var b=Register.audioType;if(a.json)for(var c in a.json){var d=(new Date).getTime();Game.load.json(c,"config/"+a.json[c]+".json?version="+Register.GAME_VRESION+"&"+d)}if(a.audio&&Register.audioType&&Game.sound.noAudio===!1){for(var c in a.audio)Game.load.audio(c,"sound/"+a.audio[c]+"."+b);Game.sound.boot()}if(a.audiosprite&&Register.audioType&&Game.sound.noAudio===!1)for(var c in a.audiosprite)Game.load.audiosprite(c,"sound/"+a.audiosprite[c].path+"."+b,null,a.audiosprite[c].audioJSON);if(a.image)for(var c in a.image)Game.load.image(c,"images/"+a.image[c]);if(a.spritesheet)for(var c in a.spritesheet)Game.load.spritesheet(c,"images/"+a.spritesheet[c][0],a.spritesheet[c][1],a.spritesheet[c][2]);if(a.atlasHash)for(var c in a.atlasHash){var e=a.atlasHash[c];Game.load.atlasJSONHash(e,"images/atlas/"+e+".png","images/atlas/"+e+".json")}},postPreloadHandlings:function(a){var b=Game.cache.getJSON("settings"),c=a.manifest;for(var d in b)Register[d]=b[d];if(PCB.assets.removePreloadListners(),Register.mute_sound===!0&&PCB.audio.mute(),Game.sound.noAudio===!1){if(c.hasOwnProperty("audio"))for(var d in c.audio)Register.audioInstances[d]=Game.add.audio(d);if(c.hasOwnProperty("audiosprite"))for(var d in c.audiosprite)Register.audioInstances[d]=Game.add.audioSprite(d),Register.audioInstances[d].allowMultiple=!0}return!0}},!PCB)var PCB={};if(PCB.audio={play:function(a,b,c,d){if(void 0===a)return!1;if(Register.audioInstances.hasOwnProperty(a)===!1)return!1;if(void 0===d&&(d=!1),void 0===c&&(c=1),void 0===b)Register.audioInstances[a].play("",0,void 0,d,!0);else{if(!Register.audioInstances[a].sounds.hasOwnProperty(b))return!1;Register.audioInstances[a].play(b)}},stop:function(a){a?Register.audioInstances[a].stop():Game.sound.stopAll()},fadeTo:function(a,b,c){if(b||(b=1e3),c||(c=0),a&&Register.audioInstances.hasOwnProperty(a)!==!1)Register.audioInstances[a].fadeTo(b,c);else for(var d in Register.audioInstances)Register.audioInstances[d].hasOwnProperty("sounds")||Register.audioInstances[d].fadeTo(b,c)},pause:function(a,b,c){if(void 0===a)return!1;if(void 0===b&&(b=""),Register.audioInstances.hasOwnProperty(a)===!1)return!1;var d;return d=Register.audioInstances[a].hasOwnProperty("sounds")&&Register.audioInstances[a].sounds.hasOwnProperty(b)?Register.audioInstances[a].sounds[b]:Register.audioInstances[a],d.pausedPosition<0&&(d.pausedPosition=0),void 0!==d.isPlaying&&(d.isPlaying===!1?d.paused===!0?d.resume():d.play(b,0,1,c):d.isPlaying===!0&&d.pause(),!0)},mute:function(a){"undefined"!=typeof a?Game.sound.mute=Boolean(a):0==Game.sound.mute?Game.sound.mute=!0:Game.sound.mute=!1}},!PCB)var PCB={};if(PCB.clock={setIntervalClock:function(a){var b;if(!a.hasOwnProperty("id"))return!1;b=a.id;var c=a.hasOwnProperty("action")?a.action:function(){},d=a.hasOwnProperty("callback")?a.callback:function(){},e=a.hasOwnProperty("init")?a.init:null,f=a.hasOwnProperty("interval")?a.interval:1e3,g=a.hasOwnProperty("iteration")?a.iteration:-1;Register.clocks[b]={},Register.clocks[b].frequency=f,Register.clocks[b].iteration=g,Register.clocks[b].init=e,Register.clocks[b].action=c,Register.clocks[b].callback=d,Register.clocks[b].timerType="setInterval",Register.clocks[b].loopCounter=0,Register.clocks[b].isActive=!1},setTimeoutClock:function(a){var b;if(!a.hasOwnProperty("id"))return!1;b=a.id;var c=a.hasOwnProperty("callback")?a.callback:function(){},d=a.hasOwnProperty("init")?a.init:null,e=a.hasOwnProperty("timeout")?a.timeout:1e3;Register.clocks[b]={},Register.clocks[b].frequency=e,Register.clocks[b].init=d,Register.clocks[b].action=c,Register.clocks[b].timerType="setTimeout",Register.clocks[b].loopCounter=0,Register.clocks[b].isActive=!1},start:function(a){var b=Register.clocks[a];if("undefined"==typeof b)return console.log("Clock "+a+"not found"),!1;var c=Register.clocks[a].timerType,d="function"==typeof b.frequency?b.frequency():b.frequency,e="function"==typeof b.iteration?b.iteration():b.iteration;this.remove(a),b.loopCounter=0,"function"==typeof b.init&&b.init(this,a),Register.clocks[a].isActive=!0,b.instance=window[c](function(){if("setInterval"==c&&e>=0){if(console.log(e),b.loopCounter>=e)return b.callback&&b.callback(),PCB.clock.remove(a),!1;b.loopCounter++}b.action()},d)},stop:function(a){var b=Register.clocks[a];if("undefined"==typeof b)return!1;var c=b.instance,d=Register.clocks[a].timerType;"setInterval"===d?clearInterval(c):clearTimeout(c),Register.clocks[a].isActive=!1},remove:function(a){var b=Register.clocks[a],c=b.hasOwnProperty("instance")?b.instance:null;if(!c)return!1;Register.clocks[a].timerType;this.stop(a),c=null,b.loopCounter=0},removeAll:function(){for(var a in Register.clocks)this.remove(a)},unixTime:function(){return Math.round(+new Date/1e3)},convertUnixTimeToHMS:function(a){var b=parseInt(a,10),c=Math.floor(b/3600),d=Math.floor((b-3600*c)/60),a=b-3600*c-60*d;return c<10&&(c="0"+c),d<10&&(d="0"+d),a<10&&(a="0"+a),d+":"+a},timeConverter:function(a){var b=new Date(1e3*a),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=b.getFullYear(),e=c[b.getMonth()],f=b.getDate(),g=b.getHours(),h=b.getMinutes(),i=b.getSeconds(),j=f+" "+e+" "+d+" "+g+":"+h+":"+i;return j}},!PCB)var PCB={};if(PCB.event={trigger:function(a,b){return!!Register.events.hasOwnProperty(a)&&void Register.events[a](b)},add:function(a,b){return void 0!==b&&"function"==typeof b&&(Register.events.hasOwnProperty(a)&&delete Register.events[a],void(Register.events[a]=b))},remove:function(a){return!!Register.events.hasOwnProperty(a)&&void delete Register.events[a]},removeAll:function(){Register.events={}}},!PCB)var PCB={};if(PCB.leaders_board={status_network_trigger:-1,request_frequency:60,can_request_ranking:!1,priv_tag_coords:[75,142,209,276,343,410,-100],priv_tags:{},priv_status:{mode:0,hours:0,jackpot:0,duration:3600,title:"Tournament Cup",campaign_id:""},init:function(){this.reset()},request_ranking:function(){this.can_request_ranking=!1,PCB.network.sendRequest({ajax_command:"BJ_joinToLeadersBoard",user_id:Register.user_id,user_name:Register.user_name,user_credits:Register.creditCount},"_top_ranking")},update_top_ranking:function(a){var b=[],c=a.ranking,d=Register.user_id=a.user_id;Rom.nvram.updateUserID(a.user_id),this.request_frequency=a.request_frequency;var e=0;for(var f in c){var g=c[f].rank,h="";h=c[f].user_id==d?"YOU":g<7?"TOP":"",b.push({id:Number(c[f].user_id),credits:Number(c[f].user_credits),ranking:Number(g),tag_name:c[f].user_name,top_player:h,target_slot:e}),e++}this.update_tags(b)},update_tags:function(a){if(!Array.isArray(a))return!1;for(var b=[],c=[],d=0;d<a.length;){var e=a[d],f=e.id,g=this._doesIDexists(f);if(g!==!1){var h=this.priv_tags[g],i=h.ranking;c.push(g),h.processed={},h.credits!=e.credits&&(h.credits=e.credits,h.processed.credits=!0),e.ranking!=i?(e.ranking>i?h.ranking_change=2:e.ranking<i&&(h.ranking_change=0),h.ranking=e.ranking,h.processed.ranking_change=!0,h.processed.ranking=!0):(h.ranking_change=1,h.processed.ranking_change=!0),f==Register.user_id?h.top_player="YOU":e.ranking<7?h.top_player="TOP":h.top_player="",h.processed.top_player=!0,h.target_slot=e.target_slot,h.is_new=!1}else{var j=1;b.push({tag_name:e.tag_name,top_player:e.top_player,ranking:e.ranking,ranking_change:j,id:e.id,credits:e.credits,target_slot:d,is_new:!0,processed:{tag_name:!0,top_player:!0,ranking:!0,ranking_change:!0,credits:!0}})}d=d+1|0}var k=0,l=0;for(var m in this.priv_tags)c.indexOf(m)<0&&(this.priv_tags[m]=b[k],k++),this.priv_tags[m]||(this.priv_tags[m]={is_new:null,processed:{is_new:!0}},this._sendToLeadersBoard(m,this.priv_tags[m].target_slot)),this._sendToLeadersBoard(m,this.priv_tags[m].target_slot),l++},update_status:function(a){var b=this.priv_status;if("object"==typeof a){if(a.hasOwnProperty("campaign_id")&&b.campaign_id!==a.campaign_id&&(b.campaign_id=a.campaign_id),a.hasOwnProperty("title")&&b.title!==a.title&&(b.title=a.title),a.hasOwnProperty("mode")&&b.mode!=a.mode)switch(Number(a.mode)){case 4:b.status="See the Results",b.mode=4;break;case 3:b.status="Calculating Results",b.mode=3;break;case 2:b.status=b.title,b.mode=2;break;case 1:b.status="Opening Soon",b.mode=1;break;default:b.status="No Campaign",b.mode=0,b.campaign_id=""}a.hasOwnProperty("hours")&&b.hours!==a.hours&&(b.hours=a.hours),a.hasOwnProperty("jackpot")&&b.jackpot!==a.jackpot&&(b.jackpot=a.jackpot),a.hasOwnProperty("duration")&&b.duration!==a.duration&&(b.duration=a.duration)}else a===!1?(b.mode=-1,b.status="Offline (Network Error)",b.hours="--:--:--",b.jackpot="Please check connection"):(b.mode=-1,b.status="Offline",b.hours="--:--:--",b.jackpot="Awaiting for signal input")},controlStatusBoard:function(){var a={},b=PCB.clock.unixTime(),c=this.priv_status,d=this.status_network_trigger;switch(d>-1&&(console.log(d),d--),Number(c.mode)){case 4:a.status=c.status,a.hours="",a.jackpot=c.jackpot;break;case 3:a.status=c.status,a.hours="Please Wait",a.jackpot=c.jackpot;break;case 2:var e=c.hours,f=e-b;f>0?(a.status=c.status,a.hours=PCB.clock.convertUnixTimeToHMS(f),a.jackpot=c.jackpot):(this.update_status({mode:3}),a.hours="Session Closed");break;case 1:var e=c.hours,f=e-b;f>0?(a.status=c.status,a.hours=PCB.clock.convertUnixTimeToHMS(f),a.jackpot=c.jackpot):(this.update_status({mode:2,hours:b+c.duration}),a.hours="Session Started");break;case 0:a.status=c.status,a.hours="",a.jackpot="Check out our website.";break;default:a.status=c.status,a.hours=c.hours,a.jackpot=c.jackpot}PCB.sprite({id:"leaders_board_status",arguments:a})},reset:function(){this.priv_tags={},this.priv_tags.tag_1={tag_name:"",top_player:"",ranking:"",ranking_change:0,id:{},credits:"",is_new:!0,processed:{tag_name:!0,top_player:!0,ranking:!0,ranking_change:!0,credits:!0}},this.priv_tags.tag_2={tag_name:"",top_player:"",ranking:"",ranking_change:1,id:"",is_new:!0,processed:{tag_name:!0,top_player:!0,ranking:!0,ranking_change:!0,credits:!0},credits:""},this.priv_tags.tag_3={tag_name:"",top_player:"",ranking:"",ranking_change:2,id:"",is_new:!0,processed:{tag_name:!0,top_player:!0,ranking:!0,ranking_change:!0,credits:!0},credits:""},this.priv_tags.tag_4={tag_name:"",top_player:"",ranking:"",ranking_change:0,id:"",is_new:!0,processed:{tag_name:!0,top_player:!0,ranking:!0,ranking_change:!0,credits:!0},credits:""},this.priv_tags.tag_5={tag_name:"",top_player:"",ranking:"",ranking_change:1,id:"",is_new:!0,processed:{tag_name:!0,top_player:!0,ranking:!0,ranking_change:!0,credits:!0},credits:""},this.priv_tags.tag_6={tag_name:"",top_player:"",ranking:"",ranking_change:2,id:"",is_new:!0,processed:{tag_name:!0,top_player:!0,ranking:!0,ranking_change:!0,credits:!0},credits:""};var a=0;for(var b in this.priv_tags)this._sendToLeadersBoard(b,a),a++;this._sendToLeadersStatusBoard(),this.update_status()},update_user_name:function(a){var b=this._doesIDexists(Register.user_id),c=(this.priv_tags[b],{});c.id=b,c.is_new=!1,c.tag_name=a,PCB.sprite({id:"leaders_board",arguments:c})},_sendToLeadersBoard:function(a,b){var c=this.priv_tags[a];if(Object.getOwnPropertyNames(c.processed).length<0)return!1;var d={};d.id=a,d.is_new=c.is_new,c.processed.tag_name===!0&&(d.tag_name=c.tag_name),c.processed.top_player===!0&&(d.top_player=c.top_player),c.processed.ranking===!0&&(""===c.ranking?d.ranking="":d.ranking="No. "+c.ranking),c.processed.ranking_change===!0&&(d.ranking_change=c.ranking_change),d.y=this.priv_tag_coords[b],c.processed.credits===!0&&(""===c.credits?d.credits="":d.credits=c.credits+" Credits"),PCB.sprite({id:"leaders_board",arguments:d})},_doesIDexists:function(a){for(var b in this.priv_tags)if(this.priv_tags[b].id==a)return b;return!1},_sendToLeadersStatusBoard:function(a,b){var c={};PCB.sprite({id:"leaders_board_status",arguments:c})}},!PCB)var PCB={};if(PCB.network={sendRequest:function(a,b){var c=b||"",d=Register.play_be_net_url;if(""===d)return!1;var e=new XMLHttpRequest;e.open("POST",d,!0),e.setRequestHeader("Content-Type","application/json; charset=UTF-8"),e.onload=function(){var a=e.responseText;e.status>=200&&e.status<400?PCB.event.trigger("onNetworkSuccess"+c,JSON.parse(a)):PCB.event.trigger("onNetworkServerError"+c,a)},e.onerror=function(){PCB.event.trigger("onNetworkError"+c)},e.send(JSON.stringify(a))},parseResponse:function(a){return!(!a.response||1!=a.response)&&a.json}},!PCB)var PCB={};if(PCB.nvramController={cookie_read:function(a,b,c){for(var d=a+"=",e=document.cookie.split(";"),f=0;f<e.length;f++){for(var g=e[f];" "==g.charAt(0);)g=g.substring(1,g.length);if(0==g.indexOf(d))return g.substring(d.length,g.length)}return this.cookie_write(a,b,c),b},cookie_write:function(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="; expires="+d.toGMTString()}else var e="";return document.cookie=a+"="+b+e+"; path=/",b},cookie_erase:function(a){this.cookie_write(a,"",-1)}},!PCB)var PCB={};if(PCB.reels={reels_settings_data:null,countup_amount:50,blinker_step:0,blinker_count:0,init:function(){this.reels_settings_data=Game.cache.getJSON("reels_settings");for(var a=0;a<3;a++)this.initReelData(a),this.initReelClock(a);PCB.clock.setTimeoutClock({id:"waitForHandpaymentBell",timeout:5625,callback:function(){PCB.audio.pause("big_payout","",!0),PCB.reels.startTextDisplayCountAnimation()}}),PCB.clock.setIntervalClock({id:"creditSegmentAnimation",interval:40,iteration:-1,action:function(){PCB.sprite({id:"dynamic_text_game_creditCount",arguments:Register.creditCount}),PCB.sprite({id:"dynamic_text_game_winCount",arguments:Register.winCount}),Register.pending_current_credits<=Register.creditCount?(Register.winCount>=10&&PCB.audio.stop(),PCB.clock.stop("creditSegmentAnimation")):(Register.creditCount+=PCB.reels.countup_amount,Register.winCount+=PCB.reels.countup_amount,Register.creditCount>=Register.pending_current_credits&&(Register.creditCount=Register.pending_current_credits,Register.winCount=Register.pending_current_win),PCB.event.trigger("onSegmentAnimation"))}}),PCB.clock.setIntervalClock({id:"symbolBlinker",interval:400,iteration:-1,init:function(){PCB.reels.blinker_step=0,PCB.reels.blinker_count=0},action:function(){var a=Register.current_wins,b=a.length-1,c=a[PCB.reels.blinker_count],d=c.stops,e=c.betLine,f=0;if(0==PCB.reels.blinker_step){f="0x555555";var g=["line_top","line_middle","line_bottom","line_top_down","line_bottom_up"];PCB.sprite({id:"indicator_lamp",arguments:{id:g[e],lampState:!1}})}else f=!1,PCB.reels.updateBetIndicator();for(var h in d)PCB.reels.symbolTint(d[h].reelID,d[h].stopID,f);PCB.reels.blinker_step>1?(PCB.reels.blinker_step=0,PCB.reels.blinker_count++,b<PCB.reels.blinker_count&&(PCB.reels.blinker_count=0)):PCB.reels.blinker_step++}})},initReelData:function(a){var b=Register.reels[a],c=Register.game_difficulty,d=this.reels_settings_data[c][a];b.reelStrip=d.reelStrip,b.chances=d.chances,b.reelStopNum=d.reelStrip.length,b.totalChances=this.sumNumInArray(d.chances),this.resetReel(a)},sumNumInArray:function(a){return a.reduce(function(a,b,c,d){return a+b})},initReelClock:function(a){PCB.clock.setTimeoutClock({id:"reel_spin_stop_"+a,timeout:function(){var b=[];return b=3==Register.lichi_state?[2e3,3e3,4e3]:2==Register.lichi_state?[1200+PCB.rng.generate(1500),1200+PCB.rng.generate(1500),1200+PCB.rng.generate(1500)]:[1e3,1140+PCB.rng.generate(50),1340+PCB.rng.generate(50)],b[a]},callback:function(){Register.reels[a].isSpinning=!1,PCB.reels.tweenToTheStop(a,Register.reels[a].stop)}})},showReels:function(){Register.reel_unit.group=Game.add.group();for(var a in Register.reels)this.resetReel(a),this.createReelStepperContainers(a),Register.reel_unit.group.add(Register.reels[a].group),this.buildReelStrips(a);Register.reel_unit.group.y=46,Register.reel_unit.group.x=70},removeReel:function(){for(var a in Register.reels){var b=Register.reels[a];if(null!==b.group){for(var c in b.stopInstances)null!==b.stopInstances[c]&&b.stopInstances[c].destroy(),b.stopInstances[c]=null;b.group.destroy()}b.group=null}},createReelStepperContainers:function(a){Register.reels[a].group=Game.add.group();var b=270;Register.reels[a].group.x=b*a},buildReelStrips:function(a){var b=Register.reels[a],c=Register.reelSymbol_height,d=0;b.stopInstances=[];for(var e=0;e<b.reelStopNum+4;e++){var f=PCB.rng.generate_one_f_fluctuation()-.5;f=Math.floor(f),d=e<=b.reelStopNum-1?e:e-b.reelStopNum,b.stopInstances.push(Game.add.sprite(f,c*e,"symbols",b.reelStrip[d])),b.group.add(b.stopInstances[e])}b.height=b.reelStopNum*c},resetReel:function(a){var b=Register.reels[a];b.stop=0},advanceReel:function(a,b){var c=Register.reels[a],d=c.group.y,e=d-b,f=0-c.height;f>e&&(e=0-(e-f+b+1)),c.group.y=Math.round(e)},startReelSpin:function(){if(Register.spinReady===!1)return!1;PCB.event.trigger("spinNotReady"),Register.reelsActionComplete=0;var a=this,b=function(b){var c=b.reelID;2===c&&PCB.event.trigger("onStartReelSpin"),a.symbolBlurOn(c),Register.reels[c].isSpinning=!0,PCB.clock.start("reel_spin_stop_"+c)};PCB.event.trigger("beforeStartReelSpin");for(var c=Register.reelSymbol_height,d=0;d<3;d++){var e=Register.reels[d],f=e.group.y-1.5*c,g=Game.add.tween(e.group).to({y:f},150,Phaser.Easing.Back.In,!0,50*d,0);e.group.reelID=d,g.onComplete.add(b,this)}},symbolBlurOn:function(a){for(var b={bar:"bar_blur",bell:"bell_blur",cherry:"cherry_blur",orange:"orange_blur",prune:"prune_blur",seven:"seven_blur",blank:"blank_blur"},c=Register.reels[a],d=c.stopInstances.length,e=0;e<d;e++){var f=c.stopInstances[e].frameName;c.stopInstances[e].frameName=b[f]}},symbolBlurOff:function(a){for(var b={bar_blur:"bar",bell_blur:"bell",cherry_blur:"cherry",orange_blur:"orange",prune_blur:"prune",seven_blur:"seven",blank_blur:"blank"},c=Register.reels[a],d=c.stopInstances.length,e=0;e<d;e++){var f=c.stopInstances[e].frameName;c.stopInstances[e].frameName=b[f]}},symbolTint:function(a,b,c){var d=Register.reels[a],e=d.stopInstances[b];c===!1&&(c=16777215),e.tint=c},updateBetIndicator:function(){var a=Register.betCount,b=!1,c=!1,d=!1;a>0&&(b=!0),a>1&&(c=!0),a>2&&(d=!0),PCB.sprite({id:"indicator_lamp",arguments:{id:"line_middle",lampState:b}}),PCB.sprite({id:"indicator_lamp",arguments:{id:"line_top",lampState:c}}),PCB.sprite({id:"indicator_lamp",arguments:{id:"line_bottom",lampState:c}}),PCB.sprite({id:"indicator_lamp",arguments:{id:"line_top_down",lampState:d}}),PCB.sprite({id:"indicator_lamp",arguments:{id:"line_bottom_up",lampState:d}})},resetSymbolsTint:function(){for(var a=0;a<3;a++)for(var b=Register.reels[a],c=b.stopInstances.length,d=0;d<c;d++)PCB.reels.symbolTint(a,d,!1)},tweenToTheStop:function(a,b){var c=[{duration:300,type:Phaser.Easing.Elastic.Out,sound:"step_stop_1"},{duration:250,type:Phaser.Easing.Bounce.InOut,sound:"step_stop_1"},{duration:250,type:Phaser.Easing.Back.Out,sound:"step_stop_2"},{duration:200,type:Phaser.Easing.Back.InOut,sound:"step_stop_3"}],d=Register.reels[a],e=d.reelStopNum-1;b=b<e?b:-1,Game.tweens.removeFrom(d.group),this.symbolBlurOff(a);var f,g=Register.reelSymbol_height,h=d.group.y,i=b*g,j=Math.abs(h-(0-i));f=j>5e3?0:j>2900?1:j>300?2:3;var k=Game.add.tween(d.group).to({y:0-i},c[f].duration,c[f].type,!0,0,0);PCB.audio.play("sfx",c[f].sound),k.onComplete.add(function(){Register.reelsActionComplete++,Register.reelsActionComplete>2&&PCB.event.trigger("onCompleteReelSpin")},this)},getNewStopID:function(a){for(var b=Register.reels[a],c=PCB.rng.generate(b.totalChances),d=b.reelStopNum-1,e=b.chances,f=0,g=0;g<d;g++){if(c<=f)return g;f+=e[g]}return g},fillSymbolDisplayMatrix:function(){Register.symbol_display_matrix=[["","",""],["","",""],["","",""]];for(var a=0;a<3;a++){var b,c=Register.reels[a],d=c.stop,e=c.reelStopNum-1,f=!1;b=d,f=b>e-1,Register.symbol_display_matrix[0][a]={reelID:a,stopID:b,symbol:c.reelStrip[d]},b=f===!0?0:b+1,d=d<e?d+1:0,Register.symbol_display_matrix[1][a]={reelID:a,stopID:b,symbol:c.reelStrip[d]},b+=1,d=d<e?d+1:0,Register.symbol_display_matrix[2][a]={reelID:a,stopID:b,symbol:c.reelStrip[d]}}},evaluateWinningCombinations:function(a){var b=Register.betCount;Register.current_wins=[];var c=Register.symbol_display_matrix,d=b>1?2:1,e=1==b?1:0;1==a&&console.log(JSON.stringify(c));for(var f=e;f<=d;f++)this.scanMatches(f,0,f,1,f,2,"",f,a);b>=3&&(this.scanMatches(0,0,1,1,2,2,"cherry",3,a),this.scanMatches(2,0,1,1,0,2,"cherry",4,a)),Register.current_wins.length>0&&1==a&&console.log(Register.current_wins)},scanMatches:function(a,b,c,d,e,f,g,h,i){var j=Register.symbol_display_matrix,k=this.reels_settings_data.winning_combinations,l=this.reels_settings_data.pay_tables,m=j[a][b].symbol+"-"+j[c][d].symbol+"-"+j[e][f].symbol,n=!1;1==i&&console.log(m);for(var o in k)if((n!==!0||!~m.indexOf("cherry"))&&m.match(k[o])){if(1==l.hasOwnProperty(o)&&o!==g){var p=[];p.push(this.returnMatchedSymbolStop(a,b,l[o].symbol)),p.push(this.returnMatchedSymbolStop(c,d,l[o].symbol)),p.push(this.returnMatchedSymbolStop(e,f,l[o].symbol)),p=p.filter(function(a){return""!==a}),Register.current_wins.push({combination:o,payout:l[o].payout,stops:p,betLine:h}),~m.indexOf("cherry")&&(n=!0)}1==i&&console.log("WON COMBINATION","LINE: "+(_scan+1)+" --- ",o,new Date)}},returnMatchedSymbolStop:function(a,b,c){var d=Register.symbol_display_matrix;if(d[a][b].symbol==c){var e=d[a][b].reelID,f=d[a][b].stopID;Register.reels[e].reelStopNum;return{reelID:e,stopID:f,symbol:d[a][b].symbol}}return""},arrayUniqueByValue:function(a,b){for(var c={},d=0;d<a.length;d++)c[a[d][b]]=a[d];a=[];for(var e in c)a.push(c[e]);return a},detectLichi:function(a){var b=this.reels_settings_data.lichi_combinations,c=!1;for(var d in b)this.scanLichi(b[d])===!0&&(c=d);return c},scanLichi:function(a){var b=Register.betCount,c=function(a,b,c,d,e,f,g){var h=Register.symbol_display_matrix,i=h[b][c].symbol+"-"+h[d][e].symbol+"-"+h[f][g].symbol;return i.match(a)},d=[];return b>0&&d.push(c(a,1,0,1,1,1,2)),b>1&&(d.push(c(a,0,0,0,1,0,2)),d.push(c(a,2,0,2,1,2,2))),b>2&&(d.push(c(a,0,0,1,1,2,2)),d.push(c(a,2,0,1,1,0,2))),d=d.filter(function(a){return void 0!=a}),Object.keys(d).length>0},evaluateGameResult:function(){this.current_totalPayout=0;var a=0,b=0,c=Register.betCount;c=c>=20?4:c>=10?3:c>=5?2:1;for(var d=0;d<Register.current_wins.length;d++)b=Register.current_wins[d].payout,a+=b;Register.currentTotalPayout=a*c,Register.pending_current_win=a*c,Register.winCount=0,PCB.sprite({id:"dynamic_text_game_winCount",arguments:"0"}),Register.pending_current_win>0?(Register.pending_current_credits=Register.pending_current_win+Register.creditCount,this.awardPlayer()):(console.log("evaluateGameResult called but No payout (exception)"),PCB.event.trigger("spinReady"))},awardPlayer:function(){var a=Register.pending_current_win,b="";b=a>=500?"handpay_bell":a>=50?"payout_4":a>=10?"payout_3":a>=3?"payout_2":"payout_1",PCB.audio.play("sfx",b),a>=500?PCB.clock.start("waitForHandpaymentBell"):this.startTextDisplayCountAnimation()},startTextDisplayCountAnimation:function(){this.countup_amount=Math.ceil(Math.sqrt(Register.pending_current_win/50)),PCB.event.trigger("spinReady"),PCB.clock.start("creditSegmentAnimation"),PCB.clock.start("symbolBlinker")},chargeCredits:function(){var a=Register.betCount,b=a;b>3&&(b=3),PCB.audio.play("sfx","bet_"+b),Register.creditCount=Register.pending_current_credits=Register.creditCount-a,Rom.nvram.updateCredit(Register.pending_current_credits),PCB.sprite({id:"dynamic_text_game_creditCount",arguments:Register.creditCount}),PCB.sprite({id:"dynamic_text_game_replenishment",arguments:"Good Luck"})},updateBet:function(a){Register.betCount=a;var b=a;b>3&&(b=3),PCB.audio.play("sfx","bet_"+b),this.updateBetIndicator(),PCB.sprite({id:"dynamic_text_game_betCount",arguments:Register.betCount}),PCB.sprite({id:"dynamic_text_game_winCount",arguments:this.winCountMessageMultiplier(a)}),Rom.nvram.updateBetCount(Register.betCount)},winCountMessageMultiplier:function(a){var b="";return b=a>=20?"x 4":a>=10?"x 3":a>=5?"x 2":"x 1"}},!PCB)var PCB={};if(PCB.rng={generate:function(a){return~~(Math.random()*(a+1))},generate_range:function(a,b){return Math.round(Math.random()*(b-a)+a)},generate_one_f_fluctuation:function(){var a,b=Math.random();return a=b<.5?b+2*b*b:b-2*(1-b)*(1-b)},findAverage:function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b/a.length},findVariance:function(a){for(var b=this.findAverage(a),c=0,d=0;d<a.length;d++)c+=Math.pow(a[d]-b,2);return c/a.length},findStandardDeviation:function(a){var b=this.findVariance(a);return Math.sqrt(b)},floatRound:function(a){return Math.ceil(1e4*a)/1e4},testGenerate:function(a,b){var c=0;console.log("Testing RNG Generation. Range: "+a+" Iteration: "+b);for(var d=0;d<=b;d++){var e=this.generate(a);console.log("#"+d,e),e==a&&(console.log("Max value "+a),c++)}console.log("Max Value Count : "+c)}},!PCB)var PCB={};if(PCB.screen={show:function(a){var b=a.id,c=a.arguments;return!!b&&void Rom.screen[b](c)},toggleFullScreen:function(a){return"undefined"==typeof a&&(a=Game.scale.isFullScreen!==!0),a===!0?Game.scale.startFullScreen(!1):Game.scale.stopFullScreen(),Game.scale.isFullScreen},setUpScreenScaling:function(){var a=document.getElementsByTagName("canvas")[0];a.style.overflow="hidden",this.initOrientationLock(),Game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,Game.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,Game.stage.disableVisibilityChange=!1,Game.scale.minWidth=Game.width/2,Game.scale.minHeight=Game.height/2,Game.scale.pageAlignHorizontally=!0,Game.scale.pageAlignVertically=!0,Game.scale.setResizeCallback(PCB.screen.lockScreenOrientation)},initOrientationLock:function(){var a=document.getElementById("orientation_message");return Register.isScreenOrientationLandscape=PCB.screen.findIfScreenOrientationIsLandscape(Game.width,Game.height),null!=a&&(Register.isScreenOrientationLandscape===!0?a.setAttribute("class","landscape"):a.setAttribute("class","portrait"),void this.lockScreenOrientation())},lockScreenOrientation:function(){document.getElementById("orientation_message"),PCB.screen.findIfScreenOrientationIsLandscape(window.innerWidth,window.innerHeight)},findIfScreenOrientationIsLandscape:function(a,b){return a>b}},!PCB)var PCB={};if(PCB.sprite=function(a){var b=a.id,c=a.arguments,d=a.destroy,e=a.destroy_all;if(e===!0)return Register.spriteInstances={},Register.groupInstances={},!0;if(!b)return!1;var f=Register.spriteInstances[b];"undefined"==typeof f?(Register.spriteInstances[b]={},Rom.sprite[b].new(c)):d===!0?(Register.spriteInstances[b].destroy(),Register.groupInstances[b]&&Register.groupInstances[b].destroy()):f.visible===!1?Rom.sprite[b].new(c):Rom.sprite[b].update(c)},!Rom)var Rom={};if(Rom.assets={manifest:{json:{settings:"settings",reels_settings:"reels"},image:{bonus_jackpot_logo:"logo/bonus_jackpot_logo.png",mute_off:"ui/mute_off.png",mute_on:"ui/mute_on.png",slot_foreground:"ui/slot_foreground.png",menu_screen_background:"ui/menu_screen_background.jpg",decal_amusement_only:"ui/decal_amusement_only.png",panel_label_background:"ui/panel_label_background.png",pay_table:"others/pay_table.jpg"},spritesheet:{spin_button:["ui/button_red.png",140,140],attendant_button:["ui/button_attendant.png",80,80],pay_table_button:["ui/button_pay_table.png",80,80],back_to_game_button:["ui/button_back_to_game.png",80,80],button_illuminated_sound_on:["ui/button_illuminated_sound_on.png",80,80],button_illuminated_sound_mute:["ui/button_illuminated_sound_mute.png",80,80],button_illuminated_fullscreen:["ui/button_illuminated_fullscreen.png",80,80],button_illuminated_window_screen:["ui/button_illuminated_window_screen.png",80,80],indicator_lamp:["ui/indicator_lamp.png",40,40],led_button_small:["ui/led_button_small.png",80,80],led_button_large:["ui/led_button_large.png",160,80]},atlasHash:["symbols","coins"],audio:{befive_id:"befive_id",main_title:"main_title",big_payout:"big_payout",lichi_jackpot:"lichi_jackpot",lichi_small:"lichi_small",normal_spin:"normal_spin",key_type:"key_type"},audiosprite:{sfx:{path:"sfx",audioJSON:{spritemap:{bet_1:{start:0,end:.937,loop:!1},bet_2:{start:1,end:1.937,loop:!1},bet_3:{start:2,end:2.937,loop:!1},handpay_bell:{start:3,end:8.625,loop:!1},payout_1:{start:9,end:9.5,loop:!1},payout_2:{start:10,end:10.625,loop:!1},payout_3:{start:11,end:11.464,loop:!0},payout_4:{start:12,end:12.93,loop:!0},step_stop_1:{start:13,end:13.455,loop:!1},step_stop_2:{start:13.5,end:13.907,loop:!1},step_stop_3:{start:14,end:14.459,loop:!1}}}},kurage_kobo:{path:"kurage_kobo",audioJSON:{spritemap:{switch:{start:0,end:.26,loop:!1},door_open:{start:.261,end:.885,loop:!1},door_close:{start:.886,end:1.9,loop:!1}}}}}},init:function(){PCB.screen.show({id:"boot_screen"})},preload:function(){PCB.assets.addPreloadListners(this),PCB.assets.enqueuePreloadAssets(this.manifest),Game.load.start()},loadStart:function(){PCB.sprite({id:"dynamic_text_bootMessage",arguments:"Loading assets ..."})},onFileError:function(a,b){PCB.sprite({id:"dynamic_text_bootMessage",arguments:"Error Occurred in loading files"}),PCB.assets.removePreloadListners()},fileComplete:function(a,b,c,d,e){PCB.sprite({id:"dynamic_text_bootMessage",arguments:"Now loading ... "+d+"/"+e})},loadComplete:function(){PCB.assets.postPreloadHandlings(this)?(Rom.nvram.init(),PCB.reels.init(),Register.test_switch===!0?Game.state.start("Test"):Register.show_company_logo_flash===!1&&Register.show_splash_and_title===!1?Game.state.start("GameLoop"):Register.show_company_logo_flash===!0?Game.state.start("LogoSplash"):Game.state.start("TitleLoop")):(PCB.sprite({id:"dynamic_text_bootMessage",arguments:"Error Occurred"}),console.log("Error"))}},!Rom)var Rom={};if(Rom.boot={init:function(){Game.time.advancedTiming=!0,Game.stage.backgroundColor="#444444",PCB.screen.setUpScreenScaling(),Game.input.maxPointers=1,navigator.userAgent.match(/Windows Phone/i)===!0?Register.audioType=!1:Modernizr.audio.ogg?Register.audioType="ogg":Register.audioType="m4a",Modernizr.touch&&(Register.touchDevice=!0),Game.add.text(0,0,"SYSTEM INITIALIZING ...",{font:"bold 28px Arial",fill:"#FFFFFF"}),Phaser.Device.iOS!==!0&&Phaser.Device.iOS.android!==!0||PCB.screen.toggleFullScreen(!1),Game.load.onFileError.add(this.onFileError,this)},preload:function(){Game.load.script("webfont","//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"),Game.load.image("company_logo","images/logo/company_logo.png"),Game.load.image("fullScreen_off","images/ui/fullScreen_off.png"),
Game.load.image("fullScreen_on","images/ui/fullScreen_on.png")},create:function(){},render:function(){Game.debug.text(Game.time.fps+" FPS",15,Game.world.height-15,void 0,"bold 28px")},onFileError:function(){console.log("FILE COULD NOT BE LOADED FROM INTERNET.")}},!Rom)var Rom={};Rom.nvram={specialReplenishmentMessageCounter:0,specialReplenishmentMessage:"",init:function(){Register.free_play?Register.creditCount=0:(Register.creditCount=Number(PCB.nvramController.cookie_read("creditCount",Register.initial_credits,712)),Register.replenishmentTime=PCB.nvramController.cookie_read("replenishmentTime",PCB.clock.unixTime()+Register.replenishment_every,712),this.updateReplenishment()),PCB.audio.mute(this.readMuteState()),Register.user_id=PCB.nvramController.cookie_read("userID",""),Register.betCount=Number(PCB.nvramController.cookie_read("betCount",Register.betCount,712))},readMuteState:function(){var a=PCB.nvramController.cookie_read("soundMuteState",Register.mute_sound);return"false"!=a},updateMuteState:function(a){PCB.nvramController.cookie_write("soundMuteState",String(a))},updateUserID:function(a){PCB.nvramController.cookie_write("userID",String(a))},updateCredit:function(a){PCB.nvramController.cookie_write("creditCount",a),PCB.nvramController.cookie_write("replenishmentTime",Register.replenishmentTime)},updateBetCount:function(a){PCB.nvramController.cookie_write("betCount",a)},updateReplenishment:function(){var a=Register.creditCount,b=PCB.clock.unixTime(),c=Register.replenishment_every,d=Register.replenishmentTime,e=Math.abs(b-d),f=Number(Register.replenishment_max);if(a<f&&b>=d){var g=Number(Register.replenishment_credits),h=Math.ceil(e/c),i=Math.ceil(c/f),j=i<h?i:h;if(j>0){var k=Number(g*j);Number(Register.creditCount)+k>f&&(k=f-Number(Register.creditCount)),Register.pending_current_credits=Register.creditCount=Number(Register.creditCount)+k,PCB.nvramController.cookie_write("creditCount",Register.creditCount,712),Register.replenishmentTime=PCB.nvramController.cookie_write("replenishmentTime",b+c,712),this.specialReplenishmentMessageCounter=3,this.specialReplenishmentMessage=k+" credits awarded.",PCB.sprite({id:"dynamic_text_game_winCount",arguments:PCB.reels.winCountMessageMultiplier(Register.betCount)})}}else a>=f&&b>d&&(Register.replenishmentTime=PCB.nvramController.cookie_write("replenishmentTime",b+c,712))}};var Register={GAME_TITLE:"BEFIVE BONUS JACKPOT",GAME_VRESION:"BE-BJ-170401-1315",audioType:null,touchDevice:!1,isScreenOrientationLandscape:!1,menuDisplayed:!1,debug:{},events:{},clocks:{},audioInstances:{},spriteInstances:{},groupInstances:{},graphicInstances:{},keyinputInstances:{},renderTextureInstances:{},maskInstances:{},reelSymbol_height:160,reelSymbol_width:235,spinReady:!1,reelsLichiMode:0,reelsActionComplete:0,winningCombination:[],winningCombinationMatrix:[],reel_unit:{group:null},reels:[{stop:0,currentStop:0,height:0,reelStrip:[],reelStopNum:0,chances:[],totalChances:0,stopInstances:null,isSpinning:!1,group:null},{stop:0,currentStop:0,height:0,reelStrip:[],reelStopNum:0,chances:[],totalChances:0,stopInstances:null,isSpinning:!1,group:null},{stop:0,currentStop:0,height:0,reelStrip:[],reelStopNum:0,chances:[],totalChances:0,stopInstances:null,isSpinning:!1,group:null}],payTable:{},creditCount:0,winCount:0,lichi_state:0,betCount:5,current_wins:[],currentTotalPayout:0,pending_current_credits:0,pending_current_win:0,symbol_display_matrix:[["","",""],["","",""],["","",""]],user_id:"",replenishmentTime:-1,skip_splash_and_title:!1,show_company_logo_flash:!0,mute_sound:"false",game_difficulty:"normal",price_decale:0,free_play:!1,serial_number:"",game_attraction_sound:!0,initial_credits:100,replenishment_credits:100,replenishment_max:200,replenishment_every:600,test_switch:!1,adProvider_url:""};if(!Rom)var Rom={};if(Rom.screen={boot_screen:function(){Game.stage.backgroundColor="#EEEEEE",PCB.sprite({id:"dynamic_text_bootMessage"}),PCB.sprite({id:"sprite_company_logo",arguments:{scale:.5}}),PCB.sprite({id:"button_fullScreen"})},company_logo_flash:function(){Game.stage.backgroundColor="#EEEEEE",PCB.sprite({id:"static_text_presentedBy"}),PCB.sprite({id:"static_text_versionNumber",arguments:{}}),PCB.sprite({id:"sprite_company_logo",arguments:{scale:1,y:Game.world.centerY}}),PCB.sprite({id:"dynamic_text_serialNumber",arguments:{serialNumber:Register.serial_number}})},title_screen:function(){Game.stage.backgroundColor="#EEEEEE",PCB.sprite({id:"title_image"}),PCB.sprite({id:"static_text_touchScreen"}),PCB.sprite({id:"static_text_copyright"}),PCB.sprite({id:"dynamic_text_serialNumber",arguments:{x:140,y:Game.world.bounds.height-15,color:"#FFFFFF",fontSize:18}}),PCB.sprite({id:"static_text_versionNumber",arguments:{x:160,y:20,color:"#FFFFFF",fontSize:18,align:"left"}}),PCB.sprite({id:"dynamic_text_creditCount"}),PCB.sprite({id:"button_mute"}),PCB.sprite({id:"button_fullScreen"}),Register.spriteInstances.static_text_touchScreen.y=Game.world.centerY,Register.spriteInstances.static_text_touchScreen.alpha=0,Game.add.tween(Register.spriteInstances.static_text_touchScreen).to({alpha:1,y:Game.world.centerY+200-Register.spriteInstances.static_text_touchScreen.height},1500,Phaser.Easing.Bounce.Out,!0,250,0),Game.add.tween(Register.spriteInstances.static_text_touchScreen.scale).to({x:1.22,y:1.2},2e3,Phaser.Easing.Linear.None,!0,2e3,-1,!0)},game_screen:function(){Game.stage.backgroundColor="#EEEEEE",PCB.reels.showReels(),PCB.sprite({id:"slot_foreground"}),PCB.sprite({id:"spin_button"}),PCB.sprite({id:"bet_button"}),PCB.sprite({id:"attendant_button"}),PCB.sprite({id:"paytable_button"}),PCB.sprite({id:"dynamic_text_game_creditCount"}),PCB.sprite({id:"dynamic_text_game_replenishment"}),PCB.sprite({id:"dynamic_text_game_winCount"}),PCB.sprite({id:"dynamic_text_game_betCount"}),PCB.sprite({id:"decal_amusement_only"}),PCB.sprite({id:"indicator_lamp",arguments:{id:"line_top_down",x:15,y:70}}),PCB.sprite({id:"indicator_lamp",arguments:{id:"line_top",x:15,y:110}}),PCB.sprite({id:"indicator_lamp",arguments:{id:"line_middle",x:15,y:274}}),PCB.sprite({id:"indicator_lamp",arguments:{id:"line_bottom",x:15,y:430}}),PCB.sprite({id:"indicator_lamp",arguments:{id:"line_bottom_up",x:15,y:470}}),PCB.sprite({id:"vfx_coin_fountain"}),PCB.sprite({id:"dialog_no_credits"}),PCB.sprite({id:"options_menu_panel"}),PCB.sprite({id:"paytable_board"})}},!Rom)var Rom={};if(Rom.sprite={static_text_presentedBy:{new:function(){_textString="Presented by",Register.spriteInstances.static_text_presentedBy=Game.add.text(Game.world.centerX,Game.world.centerY-180,_textString,{font:"61px Skranji",fill:"#555555",align:"center"}),Register.spriteInstances.static_text_presentedBy.anchor.setTo(.5,.5)},update:function(){Game.world.bringToTop(Register.spriteInstances.static_text_presentedBy)}},static_text_versionNumber:{new:function(a){var b,c=a.x,d=a.y,e=a.fontSize,f=a.color,g=a.align,h="VERSION: "+Register.GAME_VRESION;e||(e=30),c||(c=Game.world.centerX),d||(d=Game.world.centerY+180),f?b=3:(f="#555555",b=0),g||(g="center"),Register.spriteInstances.static_text_versionNumber=Game.add.text(c,d,h,{font:e+"px Skranji",fill:f,stroke:"#D64E29",strokeThickness:b,align:g}),Register.spriteInstances.static_text_versionNumber.anchor.setTo(.5,.5)},update:function(){Game.world.bringToTop(Register.spriteInstances.static_text_versionNumber)}},static_text_touchScreen:{new:function(){var a="Please click on the screen";Register.touchDevice===!0&&(a="Please touch the screen"),Register.spriteInstances.static_text_touchScreen=Game.add.text(Game.world.centerX,Game.world.centerY,a,{font:"24px Skranji",fill:"#ea134b",stroke:"#FFFFFF",strokeThickness:3,align:"center"}),Register.spriteInstances.static_text_touchScreen.anchor.setTo(.5,.5)},update:function(){Game.world.bringToTop(Register.spriteInstances.static_text_touchScreen)}},static_text_copyright:{new:function(){var a="©2017 Befive Entertainment";Register.spriteInstances.static_text_copyright=Game.add.text(Game.world.centerX,Game.world.centerY+250,a,{font:"32px Skranji",fill:"#FFF",stroke:"#D64E29",strokeThickness:3,align:"center"}),Register.spriteInstances.static_text_copyright.anchor.setTo(.5,.5)},update:function(){Game.world.bringToTop(Register.spriteInstances.static_text_copyright)}},dynamic_text_bootMessage:{new:function(a){a||(a=""),Register.spriteInstances.dynamic_text_bootMessage=Game.add.text(Game.world.centerX,Game.world.centerY,a,{font:"42px Skranji",fill:"#555555",align:"center"}),Register.spriteInstances.dynamic_text_bootMessage.anchor.setTo(.5,.5)},update:function(a){a||(a=""),Register.spriteInstances.dynamic_text_bootMessage.setText(a),Game.world.bringToTop(Register.spriteInstances.dynamic_text_bootMessage)}},dynamic_text_creditCount:{new:function(a){a||(a={});var b=a.x,c=a.y,d=a.fontSize,e=a.color;d||(d=30),b||(b=0),c||(c=0),e||(e="#FFFFFF"),Register.spriteInstances.dynamic_text_creditCount=Game.add.text(b,c,"",{font:d+"px Skranji",fill:e,stroke:"#D64E29",strokeThickness:2,boundsAlignH:"right",boundsAlignV:"middle"}),Register.spriteInstances.dynamic_text_creditCount.setTextBounds(0,Game.world.bounds.height-30,Game.world.width-15,30),this.update()},update:function(a){var b="";b=a?a:Register.free_play===!0?"FREE PLAY":"CREDITS: "+(Register.creditCount?Register.creditCount:0),Register.spriteInstances.dynamic_text_creditCount.setText(b)}},dynamic_text_serialNumber:{new:function(a){var b=a.x,c=a.y,d=a.fontSize,e=a.color,f=Register.serial_number,g=0;f||(f="Please Attach License Sticker"),d||(d=30),b||(b=Game.world.centerX),c||(c=Game.world.centerY+260),e?g=3:(e="#555555",g=0),Register.spriteInstances.dynamic_text_serialNumber=Game.add.text(b,c,f,{font:d+"px Skranji",fill:e,stroke:"#D64E29",strokeThickness:g,align:"center"}),Register.spriteInstances.dynamic_text_serialNumber.anchor.setTo(.5,.5)},update:function(a){Game.world.bringToTop(Register.spriteInstances.dynamic_text_serialNumber)}},dynamic_text_game_replenishment:{new:function(a){a||(a={});var b=a.x,c=a.y,d=a.fontSize,e=a.color;d||(d=16),b||(b=0),c||(c=0),e||(e="#F8F8F8"),Register.spriteInstances.dynamic_text_game_replenishment=Game.add.text(b,c,"",{font:d+"px Josefin Sans",fill:e,boundsAlignH:"left",boundsAlignV:"middle"}),Register.spriteInstances.dynamic_text_game_replenishment.setTextBounds(210,596,217,30),this.update("")},update:function(a){Register.spriteInstances.dynamic_text_game_replenishment.setText(a)}},dynamic_text_game_creditCount:{new:function(a){a||(a={});var b=a.x,c=a.y,d=a.fontSize,e=a.color;d||(d=30),b||(b=0),c||(c=0),e||(e="#FFFFFF"),Register.spriteInstances.dynamic_text_game_creditCount=Game.add.text(b,c,"",{font:d+"px Skranji",fill:e,boundsAlignH:"right",boundsAlignV:"middle"}),Register.spriteInstances.dynamic_text_game_creditCount.setTextBounds(175,570,217,30),this.update(Register.creditCount?Register.creditCount:0)},update:function(a){Register.spriteInstances.dynamic_text_game_creditCount.setText(a)}},dynamic_text_game_winCount:{new:function(a){a||(a={});var b=a.x,c=a.y,d=a.fontSize,e=a.color;d||(d=30),b||(b=0),c||(c=0),e||(e="#FFFFFF"),Register.spriteInstances.dynamic_text_game_winCount=Game.add.text(b,c,"",{font:d+"px Skranji",fill:e,boundsAlignH:"right",boundsAlignV:"middle"}),Register.spriteInstances.dynamic_text_game_winCount.setTextBounds(492,590,148,30),this.update(Register.winCount?Register.winCount:0)},update:function(a){Register.clocks.creditSegmentAnimation&&Register.clocks.creditSegmentAnimation.hasOwnProperty("isActive")&&Register.clocks.creditSegmentAnimation.isActive===!0?Register.spriteInstances.dynamic_text_game_winCount.setText(a):(Register.spriteInstances.dynamic_text_game_winCount.alpha=0,Register.spriteInstances.dynamic_text_game_winCount.setText(a),Game.add.tween(Register.spriteInstances.dynamic_text_game_winCount).to({alpha:1},200,"Linear",!0))}},dynamic_text_game_betCount:{new:function(a){a||(a={});var b=a.x,c=a.y,d=a.fontSize,e=a.color;d||(d=30),b||(b=0),c||(c=0),e||(e="#FFFFFF"),Register.spriteInstances.dynamic_text_game_betCount=Game.add.text(b,c,"",{font:d+"px Skranji",fill:e,boundsAlignH:"right",boundsAlignV:"middle"}),Register.spriteInstances.dynamic_text_game_betCount.setTextBounds(667,590,60,30),this.update(Register.betCount?Register.betCount:0)},update:function(a){Register.spriteInstances.dynamic_text_game_betCount.alpha=0,Register.spriteInstances.dynamic_text_game_betCount.setText(a),Game.add.tween(Register.spriteInstances.dynamic_text_game_betCount).to({alpha:1},200,"Linear",!0)}},sprite_company_logo:{new:function(a){var b=a.scale,c=a.x,d=a.y;b||(b=1),c||(c=Game.world.centerX),d||(d=Game.world.centerY+200),Register.spriteInstances.sprite_company_logo=Game.add.sprite(c,d,"company_logo"),Register.spriteInstances.sprite_company_logo.anchor.setTo(.5,.5),Register.spriteInstances.sprite_company_logo.scale.setTo(b)},update:function(){Game.world.bringToTop(Register.spriteInstances.sprite_company_logo)}},title_image:{new:function(){Register.spriteInstances.title_image_background=Game.add.sprite(0,0,"menu_screen_background"),Register.spriteInstances.title_image=Game.add.sprite(Game.world.centerX,250,"bonus_jackpot_logo"),Register.spriteInstances.title_image.anchor.setTo(.5,.5)},update:function(){Game.world.bringToTop(Register.spriteInstances.title_image)}},slot_foreground:{new:function(){Register.spriteInstances.slot_foreground=Game.add.sprite(Game.world.centerX,Game.world.centerY,"slot_foreground"),Register.spriteInstances.slot_foreground.anchor.setTo(.5,.5)},update:function(){var a=Register.spriteInstances.slot_foreground.alpha;0!=a?Register.spriteInstances.slot_foreground.alpha=0:Register.spriteInstances.slot_foreground.alpha=1}},decal_amusement_only:{new:function(){Register.spriteInstances.decal_amusement_only=Game.add.sprite(411,556,"decal_amusement_only")},update:function(){Game.world.bringToTop(Register.spriteInstances.decal_amusement_only)}},button_mute:{new:function(){Register.groupInstances.button_mute=Game.add.group(),Register.spriteInstances.mute_on=Game.add.sprite(Game.world.centerX,Game.world.centerY,"mute_on"),Register.spriteInstances.mute_off=Game.add.sprite(Game.world.centerX,Game.world.centerY,"mute_off"),Register.groupInstances.button_mute.add(Register.spriteInstances.mute_on),Register.groupInstances.button_mute.add(Register.spriteInstances.mute_off),Register.groupInstances.button_mute.x=Game.world.centerX-100,Register.groupInstances.button_mute.y=30-Game.world.centerY,Register.spriteInstances.mute_on.priorityID=1e3,Register.spriteInstances.mute_off.priorityID=1e3,Register.spriteInstances.mute_on.inputEnabled=!0,Register.spriteInstances.mute_off.inputEnabled=!0,Register.spriteInstances.mute_on.events.onInputDown.add(this.onInputDown,this),Register.spriteInstances.mute_off.events.onInputDown.add(this.onInputDown,this),this.update()},update:function(){Game.sound.mute===!0?(Register.spriteInstances.mute_on.visible=!1,Register.spriteInstances.mute_off.visible=!0):(Register.spriteInstances.mute_on.visible=!0,Register.spriteInstances.mute_off.visible=!1)},onInputDown:function(){PCB.audio.mute(),this.update()}},button_fullScreen:{new:function(){Register.groupInstances.button_fullScreen=Game.add.group(),Register.spriteInstances.fullScreen_on=Game.add.sprite(Game.world.centerX,Game.world.centerY,"fullScreen_on"),Register.spriteInstances.fullScreen_off=Game.add.sprite(Game.world.centerX,Game.world.centerY,"fullScreen_off"),Register.groupInstances.button_fullScreen.add(Register.spriteInstances.fullScreen_on),Register.groupInstances.button_fullScreen.add(Register.spriteInstances.fullScreen_off),Register.groupInstances.button_fullScreen.x=20-Game.world.centerX,Register.groupInstances.button_fullScreen.y=30-Game.world.centerY,Register.spriteInstances.fullScreen_on.priorityID=1e3,Register.spriteInstances.fullScreen_off.priorityID=1e3,Register.spriteInstances.fullScreen_on.inputEnabled=!0,Register.spriteInstances.fullScreen_off.inputEnabled=!0,Register.spriteInstances.fullScreen_on.events.onInputDown.add(this.onInputDown,this),Register.spriteInstances.fullScreen_off.events.onInputDown.add(this.onInputDown,this),this.update()},update:function(){Phaser.Device.mobileSafari===!0?(Register.spriteInstances.fullScreen_on.visible=!1,Register.spriteInstances.fullScreen_off.visible=!1):Game.scale.isFullScreen===!0?(Register.spriteInstances.fullScreen_on.visible=!0,Register.spriteInstances.fullScreen_off.visible=!1):(Register.spriteInstances.fullScreen_on.visible=!1,Register.spriteInstances.fullScreen_off.visible=!0),Game.world.bringToTop(Register.groupInstances.button_fullScreen)},onInputDown:function(){PCB.screen.toggleFullScreen(),this.update()}},spin_button:{new:function(){Register.spriteInstances.spin_button=Game.add.button(Game.world.width-173,Game.world.height-96,"led_button_large",this.buttonInput,this,2,1,0),Register.spriteInstances.spin_button.scale.setTo(1),Register.spriteInstances.spin_button_text=Game.add.text(Game.world.width-148,Game.world.height-78,"S P I N",{font:"bold 36px Arial",fill:"#222",boundsAlignH:"center",boundsAlignV:"middle"})},update:function(a){1==a?(Register.spriteInstances.spin_button._onOverFrame=1,Register.spriteInstances.spin_button.inputEnabled=!0,Register.spriteInstances.spin_button.frame=0):(Register.spriteInstances.spin_button._onOverFrame=3,Register.spriteInstances.spin_button.inputEnabled=!1,Register.spriteInstances.spin_button.frame=3)},buttonInput:function(a){PCB.event.trigger("spinAction")}},bet_button:{new:function(){Register.spriteInstances.bet_button=Game.add.button(Game.world.width-270,Game.world.height-96,"led_button_small",this.buttonInput,this,2,1,0),Register.spriteInstances.bet_button.scale.setTo(1),Register.spriteInstances.spin_button_text=Game.add.text(Game.world.width-258,Game.world.height-72,"BET",{font:"bold 28px Arial",fill:"#222",boundsAlignH:"center",boundsAlignV:"middle"})},update:function(a){1==a?(Register.spriteInstances.bet_button.inputEnabled=!0,Register.spriteInstances.bet_button.frame=0):(Register.spriteInstances.bet_button.inputEnabled=!1,Register.spriteInstances.bet_button.frame=3)},buttonInput:function(a){PCB.event.trigger("toggleBet")}},attendant_button:{new:function(a){Register.spriteInstances.attendant_button=Game.add.button(17,Game.world.height-96,"attendant_button",this.buttonInput,this,2,1,0),this.update(a)},update:function(a){1==a?(Register.spriteInstances.attendant_button.inputEnabled=!0,Register.spriteInstances.attendant_button.frame=1):(Register.spriteInstances.attendant_button.inputEnabled=!1,Register.spriteInstances.attendant_button.frame=0)},buttonInput:function(a){PCB.event.trigger("settings_menu")}},paytable_board:{new:function(){Register.spriteInstances.paytable_board=Game.add.sprite(0,-700,"pay_table"),Register.spriteInstances.paytable_board.inputEnabled=!1;var a=this;Register.spriteInstances.paytable_board.events.onInputDown.add(function(b){a.buttonInput()})},update:function(a){var b=Register.spriteInstances.paytable_board;if(a===!0){var c=Game.add.tween(b).to({y:0},300,Phaser.Easing.Cubic.Out,!0);c.onComplete.add(function(){b.y=0,Register.spriteInstances.paytable_board.inputEnabled=!0},this)}else{Register.spriteInstances.paytable_board.inputEnabled=!1;var c=Game.add.tween(b).to({y:-700},300,Phaser.Easing.Quartic.In,!0);c.onComplete.add(function(){b.y=-700},this)}},buttonInput:function(a){PCB.event.trigger("hide_paytable")}},paytable_button:{new:function(){Register.spriteInstances.paytable_button=Game.add.button(110,Game.world.height-96,"pay_table_button",this.buttonInput,this,2,1,0),this.update()},update:function(a){1==a?(Register.spriteInstances.paytable_button.inputEnabled=!0,Register.spriteInstances.paytable_button.frame=1):(Register.spriteInstances.paytable_button.inputEnabled=!1,Register.spriteInstances.paytable_button.frame=0)},buttonInput:function(a){PCB.event.trigger("show_paytable")}},options_menu_panel:{is_called_for_new_user:!1,tooltip_enter_name:null,tooltip_exit_menu:null,new:function(){Register.groupInstances.options_menu_panel=Game.add.group(),Register.groupInstances.options_menu_panel.x=-1100,Register.groupInstances.options_menu_panel.y=0,Register.groupInstances.visible=!1;var a=Register.groupInstances.options_menu_panel,b=Game.add.sprite(0,0,"menu_screen_background");a.add(b),PCB.sprite({id:"back_to_game_button"}),PCB.sprite({id:"button_sound_mute"}),PCB.sprite({id:"button_screen_mode"}),PCB.sprite({id:"options_menu_panel_labels"})},update:function(a){var b=Register.groupInstances.options_menu_panel;if(a===!0){b.visible=!0;var c=Game.add.tween(b).to({x:0},400,Phaser.Easing.Cubic.Out,!0);c.onComplete.add(function(){b.x=0},this)}else{this.is_called_for_new_user=!1;var c=Game.add.tween(b).to({x:-1100},400,Phaser.Easing.Quartic.In,!0);c.onComplete.add(function(){b.x=-1100,b.visible=!1},this)}}},options_menu_panel_labels:{new:function(){var a=Register.groupInstances.options_menu_panel_labels=Game.add.group();Register.spriteInstances.exit_menu_background=Game.add.sprite(130,555,"panel_label_background"),Register.spriteInstances.exit_menu_text=Game.add.text(130,555,"Exit Menu",{font:"26px Josefin Sans",fill:"#f8ce18",stroke:"#e8622d",strokeThickness:6,boundsAlignH:"center",boundsAlignV:"middle"}),Register.spriteInstances.exit_menu_text.setTextBounds(0,0,166,71),Register.spriteInstances.mute_sound_background=Game.add.sprite(130,341,"panel_label_background"),Register.spriteInstances.mute_sound_text=Game.add.text(130,341,"Mute Sound",{font:"26px Josefin Sans",fill:"#f8ce18",stroke:"#e8622d",strokeThickness:6,boundsAlignH:"center",boundsAlignV:"middle"}),Register.spriteInstances.mute_sound_text.setTextBounds(0,0,166,71),Register.spriteInstances.screen_mode_background=Game.add.sprite(130,252,"panel_label_background"),Register.spriteInstances.screen_mode_text=Game.add.text(130,252,"Screen Mode",{font:"26px Josefin Sans",fill:"#f8ce18",stroke:"#e8622d",strokeThickness:6,boundsAlignH:"center",boundsAlignV:"middle"}),Register.spriteInstances.screen_mode_text.setTextBounds(0,0,166,71),Register.spriteInstances.game_logo=Game.add.sprite(15,0,"bonus_jackpot_logo"),Register.spriteInstances.game_logo.scale.set(.55),a.add(Register.spriteInstances.exit_menu_background),a.add(Register.spriteInstances.exit_menu_text),a.add(Register.spriteInstances.mute_sound_background),a.add(Register.spriteInstances.mute_sound_text),a.add(Register.spriteInstances.screen_mode_background),a.add(Register.spriteInstances.screen_mode_text),a.add(Register.spriteInstances.game_logo),Register.groupInstances.options_menu_panel.add(Register.groupInstances.options_menu_panel_labels)},update:function(){}},back_to_game_button:{new:function(){Register.spriteInstances.back_to_game_button=Game.add.button(33,Game.world.height-98,"back_to_game_button",this.buttonInput,this,2,1,0),Register.groupInstances.options_menu_panel.add(Register.spriteInstances.back_to_game_button),this.update()},update:function(a){1==a?(Register.spriteInstances.back_to_game_button.inputEnabled=!0,Register.spriteInstances.back_to_game_button.frame=1):(Register.spriteInstances.back_to_game_button.inputEnabled=!1,Register.spriteInstances.back_to_game_button.frame=0)},buttonInput:function(a){PCB.event.trigger("back_to_game")}},button_sound_mute:{new:function(){Register.spriteInstances.button_illuminated_sound_on=Game.add.button(33,Game.world.height-310,"button_illuminated_sound_on",this.buttonInput,this,1,1,1),Register.spriteInstances.button_illuminated_sound_mute=Game.add.button(33,Game.world.height-310,"button_illuminated_sound_mute",this.buttonInput,this,1,1,1),Register.groupInstances.options_menu_panel.add(Register.spriteInstances.button_illuminated_sound_on),Register.groupInstances.options_menu_panel.add(Register.spriteInstances.button_illuminated_sound_mute);var a=Game.sound.mute!==!0;this.update(a)},update:function(a){1==a?(Register.spriteInstances.button_illuminated_sound_on.inputEnabled=!0,Register.spriteInstances.button_illuminated_sound_mute.inputEnabled=!1,Register.spriteInstances.button_illuminated_sound_on.visible=!0,Register.spriteInstances.button_illuminated_sound_mute.visible=!1):(Register.spriteInstances.button_illuminated_sound_on.inputEnabled=!1,Register.spriteInstances.button_illuminated_sound_mute.inputEnabled=!0,Register.spriteInstances.button_illuminated_sound_on.visible=!1,Register.spriteInstances.button_illuminated_sound_mute.visible=!0)},buttonInput:function(a){PCB.event.trigger("sound_mute_toggle")}},button_screen_mode:{new:function(){Register.spriteInstances.button_illuminated_fullscreen=Game.add.button(33,Game.world.height-400,"button_illuminated_fullscreen",this.buttonInput,this,1,1,1),Register.spriteInstances.button_illuminated_window_screen=Game.add.button(33,Game.world.height-400,"button_illuminated_window_screen",this.buttonInput,this,1,1,1),Register.groupInstances.options_menu_panel.add(Register.spriteInstances.button_illuminated_fullscreen),Register.groupInstances.options_menu_panel.add(Register.spriteInstances.button_illuminated_window_screen),this.update(Game.scale.isFullScreen)},update:function(a){1==a?(Register.spriteInstances.button_illuminated_fullscreen.inputEnabled=!0,Register.spriteInstances.button_illuminated_window_screen.inputEnabled=!1,Register.spriteInstances.button_illuminated_fullscreen.visible=!0,Register.spriteInstances.button_illuminated_window_screen.visible=!1):(Register.spriteInstances.button_illuminated_fullscreen.inputEnabled=!1,Register.spriteInstances.button_illuminated_window_screen.inputEnabled=!0,Register.spriteInstances.button_illuminated_fullscreen.visible=!1,Register.spriteInstances.button_illuminated_window_screen.visible=!0)},buttonInput:function(a){PCB.event.trigger("fullscreen_toggle")}},jukebox_button_panel:{new:function(){Register.groupInstances.jukebox_button_panel=Game.add.group(),Register.groupInstances.jukebox_button_panel.x=340,Register.groupInstances.jukebox_button_panel.y=242,this._addButtons(),Register.groupInstances.options_menu_panel.add(Register.groupInstances.jukebox_button_panel)},update:function(a){},buttonInput:function(a){a.keyLetter&&PCB.event.trigger("jukebox_key_type",a.keyLetter)},_addButtons:function(){var a=Register.groupInstances.jukebox_button_panel,b=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","X","Y","Z",":",";","(",")","-",".","_","«"];for(var c in b){var d=Game.add.group(),e=c%8,f=Math.floor(c/8),g=b[c],h=Game.add.button(0,0,"jukebox_button",this.buttonInput,this,1,0,3);h.keyLetter=g;var i=Game.add.text(0,0,g,{font:"80px Josefin Sans",fill:"#E3242B",boundsAlignH:"center",boundsAlignV:"middle"});i.stroke="#b02a23",i.strokeThickness=3,i.setShadow(0,0,"#420C09",3,!1,!0);var j;j="«"===g?2:"("===g||")"===g?2:"-"===g||":"===g||";"===g?-3:6,i.setTextBounds(0,j,80,87),d.add(h),d.add(i),d.x=82*e,d.y=96*f,a.add(d)}}},leaders_board:{new:function(a){Register.groupInstances.leaders_board=Game.add.group(),Register.groupInstances.leaders_board.x=876,Register.groupInstances.leaders_board.y=45,Register.leaders_board_parts_nested_groups={},this.update(a)},update:function(a){var b=a.id;Register.leaders_board_parts_nested_groups.hasOwnProperty(b)===!1&&this._add_new(a);var c=Register.leaders_board_parts_nested_groups[b];if("undefined"!=typeof a.is_new&&null===a.is_new){c.target_x=150;var d=Game.add.tween(c).to({x:c.target_x},200,Phaser.Easing.Quartic.In,!0);d.onComplete.add(function(){c.x=c.target_x},this)}else if("undefined"!=typeof a.is_new&&a.is_new===!0){c.target_y=a.y?a.y:0,c.target_x=0;var d=Game.add.tween(c).to({x:150},200,Phaser.Easing.Quartic.In,!0);d.onComplete.add(function(){c.y=c.target_y,Game.add.tween(c).to({x:c.target_x},300,Phaser.Easing.Exponential.Out,!0)},this)}else if("undefined"!=typeof a.y){c.target_y=a.y,c.target_x=0;var d=Game.add.tween(c).to({x:0,y:a.y},400,Phaser.Easing.Cubic.Out,!0);d.onComplete.add(function(){c.y=c.target_y,c.x=c.target_x},this)}"undefined"!=typeof a.tag_name&&this._updateName(c,a.tag_name),"undefined"!=typeof a.ranking&&this._updateRanking(c,a.ranking),"undefined"!=typeof a.credits&&(c.credits.setText(a.credits),this._updateCredit(c,a.credits)),"undefined"!=typeof a.top_player&&(c.top_player.setText(a.top_player),this._updateTopPlayer(c,a.top_player)),"undefined"!=typeof a.ranking_change&&this._updateRankingChange(c,a.ranking_change)},_updateTopPlayer:function(a,b){Game.add.tween(a.top_player).to({angle:360},1e3,Phaser.Easing.Elastic.Out,!0)},_updateRankingChange:function(a,b){var c=[0,-90,180];Game.add.tween(a.ranking_change).to({angle:c[b]},1e3,Phaser.Easing.Elastic.Out,!0)},_updateCredit:function(a,b){var c=Game.add.tween(a.credits).to({},40,"Linear",!0,0,10);c.onRepeat.add(function(a,b){var c=PCB.rng.generate_range(1e5,999999);a.setText(c)}),c.onComplete.add(function(a,c){a.setText(b)})},_updateName:function(a,b){var c=Game.add.tween(a.tag_name).to({},40,"Linear",!0,0,10);c.onRepeat.add(function(a,b){var c=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,20).toUpperCase();a.setText(c)}),c.onComplete.add(function(a,c){a.setText(b)})},_updateRanking:function(a,b){var c=Game.add.tween(a.ranking).to({x:-50,alpha:0},300,Phaser.Easing.Quartic.In,!0);c.onComplete.add(function(){a.ranking.x=50,a.ranking.setText(b),Game.add.tween(a.ranking).to({x:0,alpha:1},300,Phaser.Easing.Exponential.Out,!0)},this)},_add_new:function(a){var b=a.id,c=a.x?a.x:200,d=a.y,e=Register.leaders_board_parts_nested_groups[b]=Game.add.group(),f=Game.add.sprite(0,0,"leaders_board_tag");f.visible=!1;var g=Game.add.sprite(119,34,"ranking_change");g.visible=!1,g.anchor.set(.5,.52);var h=Game.add.text(0,0,"",{font:"11px Josefin Sans",fill:"#000",boundsAlignH:"center",boundsAlignV:"middle"});h.visible=!1,h.setTextBounds(0,10,139,12);var i=Game.add.text(0,0,"",{font:"18px Josefin Sans",fill:"#444",boundsAlignH:"center",boundsAlignV:"middle"});i.visible=!1,i.setTextBounds(36,28,70,18);var j=Game.add.text(0,0,"",{font:"15px Josefin Sans",fill:"#555",boundsAlignH:"center",boundsAlignV:"middle"});j.visible=!1,j.setTextBounds(0,50,139,16);var k=Game.add.text(23,36,"",{font:"9px Josefin Sans",fill:"#FCE5BC",boundsAlignH:"left",boundsAlignV:"middle"});k.visible=!1,k.setTextBounds(0,0,19,18),k.anchor.set(.5,.4),e.add(f),e.add(h),e.add(i),e.add(j),e.add(k),e.add(g),e.tag_name=h,e.ranking=i,e.credits=j,e.top_player=k,e.ranking_change=g,e.x=c,e.y=d,f.visible=!0,g.visible=!0,h.visible=!0,i.visible=!0,j.visible=!0,k.visible=!0,Register.groupInstances.leaders_board.add(e)}},indicator_lamp:{group_sprite_stack:{},new:function(a){Register.groupInstances.indicator_lamp=Game.add.group(),this._add_new(a),this.update({id:a.id,lampState:!1}),Register.groupInstances.indicator_lamp.x=0},update:function(a){var b=a.id;this.group_sprite_stack.hasOwnProperty(b)===!1&&this._add_new(a);var c=a.lampState,d=this.group_sprite_stack[b];1==c?d.frame=0:d.frame=1},_add_new:function(a){var b=a.id,c=a.x,d=a.y;this.group_sprite_stack[b]=Game.add.sprite(c,d,"indicator_lamp"),this.group_sprite_stack[b].scale.setTo(.5),Register.groupInstances.indicator_lamp.add(this.group_sprite_stack[b])}},dialog_no_credits:{new:function(a){Register.groupInstances.dialog_no_credits=new gameModal(Game),Register.groupInstances.dialog_no_credits.createModal({type:"free_credits",includeBackground:!0,modalCloseOnInput:!0,itemsArr:[{type:"text",content:"Gameover",fontFamily:"Skranji",color:"0xea134b",stroke:"0xffffff",strokeThickness:5,fontSize:52,offsetY:-110,contentScale:.6},{type:"text",content:"Please wait till your credits are replenished.",fontFamily:"Skranji",color:"0xea134b",stroke:"0xffffff",strokeThickness:5,fontSize:36,contentScale:.6}]}),this.update(!1)},update:function(a){1==a?Register.groupInstances.dialog_no_credits.showModal("free_credits"):Register.groupInstances.dialog_no_credits.hideModal("free_credits")}},vfx_coin_fountain:{pattern:[[[100,-1500],[200,-1400],[400,-1e3],[600,-800]],[[-100,-1500],[-200,-1400],[-400,-1e3],[-600,-800]]],gameCenter:null,gameHeight:null,new:function(){Register.groupInstances.vfx_coin_fountain=Game.add.group(),this.gameCenter=Game.width/2,this.gameHeight=Game.height},update:function(){var a=Game.add.sprite(this.gameCenter,this.gameHeight,"coins");Register.groupInstances.vfx_coin_fountain.add(a),
a.animations.add("flip"),a.animations.play("flip",30,!0),a.anchor.set(.5),Game.physics.enable(a,Phaser.Physics.ARCADE),a.checkWorldBounds=!0,a.events.onOutOfBounds.add(this.killCoin,a),a.body.gravity.setTo(0,1700);var b=PCB.rng.generate(1),c=PCB.rng.generate(3),d=this.pattern[b][c];a.body.velocity.setTo(d[0],d[1])},killCoin:function(a){a.kill()}}},!Rom)var Rom={};if(Rom.hasOwnProperty("state")||(Rom.state={}),Rom.state.logoSplash={init:function(){return Game.world.alpha=0,PCB.audio.stop(),PCB.clock.removeAll(),Game.input.keyboard.isDown(Phaser.KeyCode.FIVE)===!1?(Game.state.start("Test"),!1):void PCB.sprite({destroy_all:!0})},create:function(){PCB.screen.show({id:"company_logo_flash"});var a=Game.add.tween(Game.world).to({alpha:1},200,Phaser.Easing.Quadratic.In,!0);Game.input.onDown.add(function(){Register.show_splash_and_title===!0?Game.state.start("TitleLoop"):Game.state.start("GameLoop")}),a.onComplete.add(function(){Register.game_attraction_sound===!0&&PCB.audio.play("befive_id"),Game.time.events.add(2*Phaser.Timer.SECOND,function(){Game.input.onDown.removeAll();var a=Game.add.tween(Game.world).to({alpha:0},300,Phaser.Easing.Linear.None,!0);a.onComplete.add(function(){Register.show_splash_and_title===!0?Game.state.start("TitleLoop"):Game.state.start("GameLoop")},this)},this)},this)}},Rom.state.titleLoop={init:function(){Game.world.alpha=0,PCB.audio.stop(),PCB.clock.removeAll(),PCB.sprite({destroy_all:!0})},create:function(){PCB.screen.show({id:"title_screen"}),Game.add.tween(Game.world).to({alpha:1},300,Phaser.Easing.Linear.None,!0),Register.game_attraction_sound===!0&&PCB.audio.play("main_title"),Register.spriteInstances.title_image_background.inputEnabled=!0,Register.spriteInstances.title_image_background.events.onInputDown.add(function(){Game.tweens.removeAll(),PCB.clock.removeAll(),PCB.audio.fadeTo(void 0,780);var a=Game.add.tween(Game.world).to({alpha:0},800,Phaser.Easing.Linear.None,!0);a.onComplete.add(function(){Game.state.start("GameLoop")})}),PCB.clock.setIntervalClock({id:"replenishmentObserver",interval:1e3,iteration:-1,action:function(){var a="",b=PCB.clock.unixTime(),c=Register.replenishmentTime;Number(Register.replenishment_max);if(b>c&&(Rom.nvram.updateReplenishment(),PCB.sprite({id:"dynamic_text_creditCount"})),Register.creditCount<1){var d=Math.abs(b-c);a="Service Credits in "+PCB.clock.convertUnixTimeToHMS(d),PCB.sprite({id:"dynamic_text_creditCount",arguments:a})}}}),PCB.clock.start("replenishmentObserver")}},Rom.state.game={init:function(){Game.physics.startSystem(Phaser.Physics.ARCADE),PCB.clock.removeAll(),Register.spinReady=!1,Game.world.alpha=1,PCB.audio.stop(),PCB.sprite({destroy_all:!0})},create:function(){var a="";PCB.screen.show({id:"game_screen"}),PCB.sprite({id:"dynamic_text_game_winCount",arguments:"---"}),PCB.clock.setIntervalClock({id:"gameObserver",interval:1e3,iteration:-1,action:function(){var a="",b=PCB.clock.unixTime(),c=Register.replenishmentTime,d=Number(Register.replenishment_max);if(Register.spinReady===!1||Register.clocks.creditSegmentAnimation.isActive===!0)return!1;if(b>c&&(Rom.nvram.updateReplenishment(),PCB.sprite({id:"dynamic_text_game_creditCount",arguments:Register.creditCount})),Rom.nvram.specialReplenishmentMessageCounter>0){var e=Rom.nvram.specialReplenishmentMessage;a=e,Rom.nvram.specialReplenishmentMessageCounter-=1}else if(Register.creditCount<d){var f=Math.abs(b-c);a="Service Credits in "+PCB.clock.convertUnixTimeToHMS(f)}else a="";PCB.sprite({id:"dynamic_text_game_replenishment",arguments:a})}}),PCB.clock.start("gameObserver"),Register.keyinputInstances.reel_start=Game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),Register.keyinputInstances.reel_start.onDown.add(function(){PCB.event.trigger("spinAction")},this),Register.keyinputInstances.reset_cookie=Game.input.keyboard.addKey(Phaser.Keyboard.C),Register.keyinputInstances.reset_cookie.onDown.add(function(){PCB.nvramController.cookie_erase("replenishmentTime"),PCB.nvramController.cookie_erase("creditCount")},this),Game.state.update=function(){Register.reels[0].isSpinning===!0&&PCB.reels.advanceReel(0,60),Register.reels[1].isSpinning===!0&&PCB.reels.advanceReel(1,60),Register.reels[2].isSpinning===!0&&PCB.reels.advanceReel(2,60),Register.lichi_state>1&&(PCB.sprite({id:"indicator_lamp",arguments:{id:"line_middle",lampState:PCB.rng.generate(1)}}),PCB.sprite({id:"indicator_lamp",arguments:{id:"line_top",lampState:PCB.rng.generate(1)}}),PCB.sprite({id:"indicator_lamp",arguments:{id:"line_bottom",lampState:PCB.rng.generate(1)}}),PCB.sprite({id:"indicator_lamp",arguments:{id:"line_top_down",lampState:PCB.rng.generate(1)}}),PCB.sprite({id:"indicator_lamp",arguments:{id:"line_bottom_up",lampState:PCB.rng.generate(1)}}))},PCB.event.add("spinAction",function(){if(Register.spinReady===!1)return!1;PCB.audio.stop(),PCB.clock.stop("waitForHandpaymentBell"),PCB.clock.stop("creditSegmentAnimation"),PCB.clock.stop("symbolBlinker"),PCB.reels.resetSymbolsTint(),Register.winCount=0,PCB.reels.updateBetIndicator(),0!==Register.pending_current_credits&&(PCB.clock.stop("creditSegmentAnimation"),Register.creditCount=Register.pending_current_credits,Register.pending_current_win=0,PCB.sprite({id:"dynamic_text_game_creditCount",arguments:Register.creditCount}));var a=Register.creditCount-Register.betCount;return 1!=Register.free_play&&a<0?(Register.creditCount>=10?PCB.reels.updateBet(10):Register.creditCount>=5?PCB.reels.updateBet(5):Register.creditCount>=3?PCB.reels.updateBet(3):Register.creditCount>=2?PCB.reels.updateBet(2):Register.creditCount>=1?PCB.reels.updateBet(1):PCB.sprite({id:"dialog_no_credits",arguments:!0}),!1):(PCB.sprite({id:"dynamic_text_game_winCount",arguments:PCB.reels.winCountMessageMultiplier(Register.betCount)}),PCB.reels.chargeCredits(),PCB.reels.startReelSpin(),void 0)}),PCB.event.add("beforeStartReelSpin",function(){for(var a=0;a<3;a++){var b=Register.reels[a];b.stop=PCB.reels.getNewStopID(a)}PCB.reels.fillSymbolDisplayMatrix(),PCB.reels.evaluateWinningCombinations(),Register.lichi_state=PCB.reels.detectLichi()}),PCB.event.add("onStartReelSpin",function(){switch(Register.lichi_state){case"2":a="lichi_small",PCB.audio.play(a,void 0,1,!0);break;case"3":a="lichi_jackpot",PCB.audio.pause(a,"",!0);break;default:a="normal_spin",PCB.audio.pause(a,"",!0)}}),PCB.event.add("onCompleteReelSpin",function(){if(PCB.audio.pause(a),a="",Register.lichi_state=0,PCB.reels.updateBetIndicator(),Register.current_wins.length>0){PCB.reels.evaluateGameResult(),Rom.nvram.updateCredit(Register.pending_current_credits);var b=Register.currentTotalPayout;b=b>1?b+" credits!":b+" credit!";var c="You won "+b;PCB.sprite({id:"dynamic_text_game_replenishment",arguments:c}),Rom.nvram.specialReplenishmentMessageCounter=5,Rom.nvram.specialReplenishmentMessage=c}else PCB.sprite({id:"dynamic_text_game_replenishment",arguments:"Game Over"}),PCB.sprite({id:"dynamic_text_game_winCount",arguments:"0"}),Rom.nvram.specialReplenishmentMessageCounter=5,Rom.nvram.specialReplenishmentMessage="Game Over",PCB.event.trigger("spinReady")}),PCB.event.add("onSegmentAnimation",function(){PCB.sprite({id:"vfx_coin_fountain"})}),PCB.event.add("toggleBet",function(){var a=Register.betCount;a>=20?a=1:a>=10?a=20:a>=5?a=10:a>=3?a=5:a++,PCB.reels.updateBet(a)}),PCB.event.add("show_paytable",function(){PCB.sprite({id:"attendant_button",arguments:!1}),PCB.sprite({id:"paytable_board",arguments:!0}),PCB.audio.play("kurage_kobo","door_open")}),PCB.event.add("hide_paytable",function(){PCB.sprite({id:"paytable_board",arguments:!1}),PCB.audio.play("kurage_kobo","door_close"),PCB.sprite({id:"attendant_button",arguments:!0})}),PCB.sprite({id:"back_to_game_button",arguments:!0}),PCB.event.add("back_to_game",function(){PCB.audio.play("kurage_kobo","door_close"),PCB.sprite({id:"options_menu_panel",arguments:!1}),PCB.sprite({id:"paytable_button",arguments:!0}),PCB.event.trigger("spinReady")}),PCB.event.add("settings_menu",function(){PCB.event.trigger("spinNotReady"),PCB.sprite({id:"paytable_button",arguments:!1}),PCB.audio.play("kurage_kobo","door_open"),PCB.sprite({id:"options_menu_panel",arguments:!0})}),PCB.event.add("sound_mute_toggle",function(){PCB.sprite({id:"button_sound_mute",arguments:Game.sound.mute}),Game.sound.mute===!0?(PCB.audio.mute(!1),PCB.audio.play("kurage_kobo","switch")):PCB.audio.mute(!0),Rom.nvram.updateMuteState(Game.sound.mute)}),PCB.event.add("fullscreen_toggle",function(){PCB.sprite({id:"button_screen_mode",arguments:PCB.screen.toggleFullScreen()}),PCB.audio.play("kurage_kobo","switch")}),PCB.event.add("spinReady",function(){Register.spinReady=!0,PCB.sprite({id:"spin_button",arguments:!0}),PCB.sprite({id:"bet_button",arguments:!0}),PCB.sprite({id:"attendant_button",arguments:!0}),PCB.sprite({id:"paytable_button",arguments:!0})}),PCB.event.add("spinNotReady",function(){Register.spinReady=!1,PCB.sprite({id:"spin_button",arguments:!1}),PCB.sprite({id:"bet_button",arguments:!1}),PCB.sprite({id:"attendant_button",arguments:!1}),PCB.sprite({id:"paytable_button",arguments:!1})}),PCB.reels.updateBetIndicator(),Rom.nvram.specialReplenishmentMessageCounter=3,Rom.nvram.specialReplenishmentMessage="Welcome back!",PCB.sprite({id:"dynamic_text_game_replenishment",arguments:Rom.nvram.specialReplenishmentMessage}),PCB.event.trigger("spinReady")}},Rom.state.menu={init:function(){console.log("menu state")},create:function(){}},!Rom)var Rom={};Rom.hasOwnProperty("state")||(Rom.state={}),Rom.state.test={init:function(){Game.stage.backgroundColor="#000000",Game.world.alpha=1,PCB.audio.stop(),Game.time.advancedTiming=!0,this.constructAudioAssetList()},preload:function(){Game.load.spritesheet("button_red","images/ui/button_red.png",140,140),Game.load.spritesheet("button_blue","images/ui/button_blue.png",140,140),Game.load.spritesheet("button_yellow","images/ui/button_yellow.png",140,140)},create:function(){Register.debug={},Register.debug.spriteInstances={},Register.debug.groupInstances={},Register.debug.spriteInstances.button_red=Game.add.button(Game.world.width-80,Game.world.height-80,"button_red",this.buttonInput,this,2,1,0),Register.debug.spriteInstances.button_blue=Game.add.button(Game.world.width-160,Game.world.height-80,"button_blue",this.buttonInput,this,2,1,0),Register.debug.spriteInstances.button_yellow=Game.add.button(Game.world.width-240,Game.world.height-80,"button_yellow",this.buttonInput,this,2,1,0),Register.debug.spriteInstances.button_red.scale.setTo(.5),Register.debug.spriteInstances.button_blue.scale.setTo(.5),Register.debug.spriteInstances.button_yellow.scale.setTo(.5),Register.debug.groupInstances.button_control=Game.add.group(),Register.debug.groupInstances.button_control.add(Register.debug.spriteInstances.button_red),Register.debug.groupInstances.button_control.add(Register.debug.spriteInstances.button_blue),Register.debug.groupInstances.button_control.add(Register.debug.spriteInstances.button_yellow),this.currentScreen=0,this.screen_settings(),this.pointer_test=!1,Game.input.addPointer(),Game.input.addPointer(),Game.input.addPointer(),Game.input.addPointer()},update:function(){},render:function(){this.setTestScreenText(25,Game.time.fps+" FPS",{font:"24px Skranji",fill:"#ff0000",stroke:"#FFFFFF",strokeThickness:3,align:"right"}),this.pointer_test===!0&&(Game.debug.pointer(Game.input.mousePointer),Game.debug.pointer(Game.input.pointer1),Game.debug.pointer(Game.input.pointer2),Game.debug.pointer(Game.input.pointer3),Game.debug.pointer(Game.input.pointer4),Game.debug.pointer(Game.input.pointer5),Game.debug.pointer(Game.input.pointer6))},buttonCallbacks:{button_red:function(){Rom.state.test.nextScreen()},button_blue:function(){console.log("blue")},button_yellow:function(){console.log("yellow")}},screenOrders:["screen_settings","screen_crossHatch","screen_colors","reel_test","fx_test","option_menu_panel_test","network_test"],audioAssetList:{},currentScreen:0,currentSound:0,screen_settings:function(){this.setTestScreenText(3,"SETTINGS"),this.setTestScreenText(5,"Company logo flash : "+Register.show_company_logo_flash),this.setTestScreenText(7,"Mute sound by default : "+Register.mute_sound),this.setTestScreenText(9,"Game difficulty : "+Register.game_difficulty),this.setTestScreenText(11,"Price decale : "+Register.price_decale),this.setTestScreenText(13,"Freeplay : "+Register.free_play),this.setTestScreenText(15,"Serial number : "+Register.serial_number),this.setTestScreenText(17,"Test mode : "+Register.test_switch),this.setTestScreenText(20,"Sound : Press YELLOW TO Start"),this.setTestScreenText(22,"Press RED for the next test"),this.setTestScreenText(23,"RESTART to EXIT TEST MODE"),this.setTestScreenText(24,"VERSION: "+Register.GAME_VRESION),this.buttonCallbacks.button_yellow=function(){Rom.state.test.nextSound()},this.buttonCallbacks.button_blue=function(){},Register.debug.spriteInstances.button_blue.visible=!1,Register.debug.spriteInstances.button_yellow.visible=!0,PCB.sprite({id:"button_fullScreen"})},screen_crossHatch:function(){this.clearScreen();var a=Register.spriteInstances.hatch=Game.add.graphics(0,0);a.lineStyle(1,16777215,1),a.moveTo(0,0),a.lineTo(Game.width,0),a.lineStyle(1,16777215,1),a.moveTo(0,Game.height-2),a.lineTo(Game.width-1,Game.height-2),a.lineStyle(1,16777215,1),a.moveTo(0,0),a.lineTo(0,Game.height-2),a.lineStyle(1,16777215,1),a.moveTo(Game.width-1,0),a.lineTo(Game.width-1,Game.height-2);for(var b=Game.height/11,c=1;c<11;c++)a.lineStyle(2,16777215,1),a.moveTo(0,b*c),a.lineTo(Game.width,b*c);var d=Game.width/16;for(c=1;c<16;c++)a.lineStyle(2,16777215,1),a.moveTo(d*c,0),a.lineTo(d*c,Game.height-2);Register.debug.spriteInstances.button_blue.visible=!1,Register.debug.spriteInstances.button_yellow.visible=!1,this.pointer_test=!0},screen_colors:function(){this.clearScreen();var a=Game.add.bitmapData(700,100),b=a.context.createLinearGradient(0,100,700,100);b.addColorStop(0,"#000000"),b.addColorStop(1,"#FF0000"),a.context.fillStyle=b,a.context.fillRect(0,0,700,100),Game.cache.addBitmapData("red",a);var c=Game.add.bitmapData(700,100),d=c.context.createLinearGradient(0,100,700,100);d.addColorStop(0,"#000000"),d.addColorStop(1,"#00FF00"),c.context.fillStyle=d,c.context.fillRect(0,0,700,100),Game.cache.addBitmapData("green",c);var e=Game.add.bitmapData(700,100),f=e.context.createLinearGradient(0,100,700,100);f.addColorStop(0,"#000000"),f.addColorStop(1,"#0000FF"),e.context.fillStyle=f,e.context.fillRect(0,0,700,100),Game.cache.addBitmapData("blue",e);var g=Game.add.bitmapData(700,100),h=g.context.createLinearGradient(0,100,700,100);h.addColorStop(0,"#000000"),h.addColorStop(1,"#FFFFFF"),g.context.fillStyle=h,g.context.fillRect(0,0,700,100),Game.cache.addBitmapData("white",g),Register.spriteInstances.red=Game.add.sprite(200,100,Game.cache.getBitmapData("red")),Register.spriteInstances.green=Game.add.sprite(200,210,Game.cache.getBitmapData("green")),Register.spriteInstances.blue=Game.add.sprite(200,320,Game.cache.getBitmapData("blue")),Register.spriteInstances.white=Game.add.sprite(200,430,Game.cache.getBitmapData("white")),this.setTestScreenText(2,"COLOR TEST"),this.setTestScreenText(6,"RED"),Register.spriteInstances.line_6.x=-440,this.setTestScreenText(11,"GREEN"),Register.spriteInstances.line_11.x=-440,this.setTestScreenText(16,"BLUE"),Register.spriteInstances.line_16.x=-440,this.setTestScreenText(20,"WHITE"),Register.spriteInstances.line_20.x=-440,Register.debug.spriteInstances.button_blue.visible=!1,Register.debug.spriteInstances.button_yellow.visible=!1},reel_test:function(){this.clearScreen(),Register.debug.spriteInstances.button_blue.visible=!1,Register.debug.spriteInstances.button_yellow.visible=!0,PCB.reels.showReels(),this.setTestScreenText(3,"REEL TEST"),this.setTestScreenText(5,"Stop Reel 1: 0"),this.setTestScreenText(6,"Stop Reel 2: 0"),this.setTestScreenText(7,"Stop Reel 3: 0"),Register.spriteInstances.line_5.x=400,Register.spriteInstances.line_6.x=400,Register.spriteInstances.line_7.x=400,Register.debug.reelPositionPerc=0,Register.debug.reelActive_0=!1,Register.debug.reelActive_1=!1,Register.debug.reelActive_2=!1,Register.debug.reelStop_0=0,Register.debug.reelStop_1=0,Register.debug.reelStop_2=0,Register.keyinputInstances.reel_toggle_1=Game.input.keyboard.addKey(Phaser.Keyboard.A),Register.keyinputInstances.reel_toggle_1.onDown.add(function(){Register.debug.reelActive_0=!Register.debug.reelActive_0},this),Register.keyinputInstances.reel_toggle_2=Game.input.keyboard.addKey(Phaser.Keyboard.S),Register.keyinputInstances.reel_toggle_2.onDown.add(function(){Register.debug.reelActive_1=!Register.debug.reelActive_1},this),Register.keyinputInstances.reel_toggle_3=Game.input.keyboard.addKey(Phaser.Keyboard.D),Register.keyinputInstances.reel_toggle_3.onDown.add(function(){Register.debug.reelActive_2=!Register.debug.reelActive_2},this),Register.keyinputInstances.reel_start=Game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),Register.keyinputInstances.reel_start.onDown.add(function(){PCB.reels.startReelSpin()},this),this.buttonCallbacks.button_yellow=function(){PCB.reels.startReelSpin()},Game.state.update=function(){Register.reels[0].isSpinning===!0&&PCB.reels.advanceReel(0,60),Register.reels[1].isSpinning===!0&&PCB.reels.advanceReel(1,60),Register.reels[2].isSpinning===!0&&PCB.reels.advanceReel(2,60)},PCB.event.add("beforeStartReelSpin",function(){for(var a=0;a<3;a++){var b=Register.reels[a];b.stop=PCB.reels.getNewStopID(a),Register.spriteInstances.line_5.setText("Reel Stop 1: "+Register.reels[0].stop),Register.spriteInstances.line_6.setText("Reel Stop 2: "+Register.reels[1].stop),Register.spriteInstances.line_7.setText("Reel Stop 3: "+Register.reels[2].stop)}PCB.audio.play("sfx","bet_"+Register.betCount)}),PCB.event.add("onStartReelSpin",function(){PCB.audio.pause("normal_spin","",!0)}),PCB.event.add("onCompleteReelSpin",function(){PCB.audio.pause("normal_spin"),Register.spinReady=!0}),Register.spinReady=!0},fx_test:function(){this.clearScreen(),this.setTestScreenText(3,"FX TEST"),this.setTestScreenText(15,"PRESS YELLOW BUTTON TO TRIGGER COIN TOSS"),Register.debug.spriteInstances.button_blue.visible=!1,Register.debug.spriteInstances.button_yellow.visible=!0,PCB.sprite({id:"vfx_coin_fountain"}),this.buttonCallbacks.button_yellow=function(){PCB.sprite({id:"vfx_coin_fountain"})}},leaders_board_test:function(){this.clearScreen(),PCB.sprite({id:"slot_background"}),PCB.leaders_board.init(),PCB.sprite({id:"slot_foreground"}),this.setTestScreenText(3,"LEADERS BOARD TEST"),this.setTestScreenText(10,"CURRENT TEST:"),this.setTestScreenText(12,"IDLE"),this.setTestScreenText(20,"PRESS YELLOW BUTTON TO TOGGLE CABINET PANEL"),this.setTestScreenText(22,"PRESS BLUE BUTTON TO ADVANCE ORDER CHANGE SEQ."),Register.debug.spriteInstances.button_blue.visible=!0,Register.debug.spriteInstances.button_yellow.visible=!0,Game.world.bringToTop(Register.debug.groupInstances.button_control);var a=this;this.buttonCallbacks.button_blue=function(){var b=a.leaders_board_test_sequence[a.leaders_board_test_num];a.setTestScreenText(12,b.name),b.test_pattern(),a.leaders_board_test_num>=a.leaders_board_test_sequence.length-1?a.leaders_board_test_num=0:a.leaders_board_test_num++},this.buttonCallbacks.button_yellow=function(){PCB.sprite({id:"slot_foreground"})},PCB.clock.setIntervalClock({id:"leadersBoardStatusObserver",interval:1e3,iteration:-1,action:function(){PCB.leaders_board.controlStatusBoard()}}),PCB.clock.start("leadersBoardStatusObserver")},leaders_board_status_test_mode:0,leaders_board_status_test_hours:0,leaders_board_status_test_jackpot:0,leaders_board_test_num:0,leaders_board_test_current_player_index_num:0,leaders_board_test_data:[],leaders_board_test_previous_data:[],leaders_board_test_sequence:[{name:"1: TOTALY RANDOM, STATUS WAITING FOR 10 MIN",test_pattern:function(){Rom.state.test.leaders_board_test_generate_users(50),Rom.state.test.leaders_board_test_shuffle_users(2e3),Rom.state.test.leaders_board_test_simulate_server_response(),Rom.state.test.leaders_board_status_test_mode=1,Rom.state.test.leaders_board_status_test_hours=PCB.clock.unixTime()+600,Rom.state.test.leaders_board_status_test_jackpot="Jackpot: $0",Rom.state.test.leaders_board_update_status()}},{name:"2: PLAYER AT #1, STATUS WAITING FOR 5 SECS",test_pattern:function(){Rom.state.test.leaders_board_test_swap_user(1),Rom.state.test.leaders_board_test_simulate_server_response(),Rom.state.test.leaders_board_status_test_mode=1,Rom.state.test.leaders_board_status_test_hours=PCB.clock.unixTime()+5,Rom.state.test.leaders_board_status_test_jackpot="Bonus Jackpot Cup",Rom.state.test.leaders_board_update_status()}},{name:"3: PLAYER AT #2, STATUS REMAINING 5 SECS",test_pattern:function(){Rom.state.test.leaders_board_test_swap_user(2),Rom.state.test.leaders_board_test_simulate_server_response(),Rom.state.test.leaders_board_status_test_mode=2,Rom.state.test.leaders_board_status_test_hours=PCB.clock.unixTime()+5,Rom.state.test.leaders_board_status_test_jackpot="Jackpot: $100,000",Rom.state.test.leaders_board_update_status()}},{name:"4: PLAYER AT #3, STATUS CAMP. ENDED",test_pattern:function(){Rom.state.test.leaders_board_test_swap_user(3),Rom.state.test.leaders_board_test_simulate_server_response(),Rom.state.test.leaders_board_status_test_mode=3,Rom.state.test.leaders_board_status_test_hours=0,Rom.state.test.leaders_board_status_test_jackpot="",Rom.state.test.leaders_board_update_status()}},{name:"5: PLAYER AT #4, STATUS CLOSED",test_pattern:function(){Rom.state.test.leaders_board_test_swap_user(4),Rom.state.test.leaders_board_test_simulate_server_response(),Rom.state.test.leaders_board_status_test_mode=0,Rom.state.test.leaders_board_status_test_hours=0,Rom.state.test.leaders_board_status_test_jackpot="",Rom.state.test.leaders_board_update_status()}},{name:"6: PLAYER AT #5",test_pattern:function(){Rom.state.test.leaders_board_test_swap_user(5),Rom.state.test.leaders_board_test_simulate_server_response()}},{name:"7: PLAYER AT #6",test_pattern:function(){Rom.state.test.leaders_board_test_swap_user(6),Rom.state.test.leaders_board_test_simulate_server_response()}},{name:"8: PLAYER AT #7",test_pattern:function(){Rom.state.test.leaders_board_test_swap_user(7),Rom.state.test.leaders_board_test_simulate_server_response()}},{name:"9: PLAYER AT #48",test_pattern:function(){Rom.state.test.leaders_board_test_swap_user(48),Rom.state.test.leaders_board_test_simulate_server_response()}},{name:"10: PLAYER AT #49",test_pattern:function(){Rom.state.test.leaders_board_test_swap_user(49),Rom.state.test.leaders_board_test_simulate_server_response()}},{name:"11: PLAYER AT #50",test_pattern:function(){Rom.state.test.leaders_board_test_swap_user(50),Rom.state.test.leaders_board_test_simulate_server_response()}},{name:"12: 1 PLAYER",test_pattern:function(){Rom.state.test.leaders_board_test_simulate_server_response(1)}},{name:"13: 2 PLAYERS",test_pattern:function(){Rom.state.test.leaders_board_test_simulate_server_response(2)}},{name:"14: 3 PLAYERS",test_pattern:function(){Rom.state.test.leaders_board_test_simulate_server_response(3)}},{name:"15: 4 PLAYERS",test_pattern:function(){Rom.state.test.leaders_board_test_simulate_server_response(4)}},{name:"16: 5 PLAYERS",test_pattern:function(){Rom.state.test.leaders_board_test_simulate_server_response(5)}},{name:"17: 6 PLAYERS",test_pattern:function(){Rom.state.test.leaders_board_test_simulate_server_response(6)}},{name:"18: 7 PLAYERS (EXCEPTION)",test_pattern:function(){Rom.state.test.leaders_board_test_simulate_server_response(7)}}],leaders_board_test_simulate_server_response:function(a){var b=this.leaders_board_test_data,c=[],d=this.leaders_board_test_current_player_index_num;if(a)for(var e=0;e<a;e++)c[e]=b[e],c[e].ranking=e,c[e].target_slot=e,d==e?c[e].top_player="YOU":c[e].top_player="TOP";else if(d<6)for(var e=0;e<6;e++)c[e]=b[e],c[e].ranking=e,c[e].target_slot=e,d==e?c[e].top_player="YOU":c[e].top_player="TOP";else{for(var e=0;e<3;e++)c[e]=b[e],c[e].ranking=e,c[e].target_slot=e,c[e].top_player="TOP";d>=b.length-1?(c[3]=b[d-2],c[3].ranking=d-2,c[3].top_player="",c[4]=b[d-1],c[4].ranking=d-1,c[4].top_player="",c[5]=b[d],c[5].ranking=d,c[5].top_player="YOU"):(c[3]=b[d-1],c[3].ranking=d-1,c[3].top_player="",c[4]=b[d],c[4].ranking=d,c[4].top_player="YOU",c[5]=b[d+1],c[5].ranking=d+1,c[5].top_player=""),c[3].target_slot=3,c[4].target_slot=4,c[5].target_slot=5}PCB.leaders_board.update_tags(c)},leaders_board_update_status:function(){PCB.leaders_board.update_status({mode:this.leaders_board_status_test_mode,hours:this.leaders_board_status_test_hours,jackpot:this.leaders_board_status_test_jackpot})},leaders_board_test_swap_user:function(a){this.save_previous_data(),a--;var b={},c={},d=this.leaders_board_test_current_player_index_num;c=this.leaders_board_test_data[d],b=this.leaders_board_test_data[a],this.leaders_board_test_data[d]=b,this.leaders_board_test_data[a]=c,this.leaders_board_test_current_player_index_num=a,this.compare_with_prev_data()},leaders_board_test_shuffle_users:function(a){if(this.save_previous_data(),"number"!=typeof a)for(var b in this.leaders_board_test_data)this.leaders_board_test_data[b].credits=PCB.rng.generate(1e5);else for(var b in this.leaders_board_test_data){var c=PCB.rng.generate(a);c-=a/2,this.leaders_board_test_data[b].credits+=c,this.leaders_board_test_data[b].credits<0&&(this.leaders_board_test_data[b].credits=0)}this.leaders_board_test_data=this.object_array_sort(this.leaders_board_test_data,"credits");for(var b in this.leaders_board_test_data)if(this.leaders_board_test_data[b].is_player){this.leaders_board_test_current_player_index_num=Number(b);break}this.compare_with_prev_data()},leaders_board_test_generate_users:function(a,b){var c=["MR.","MRS."],d=[["JAMES","JOHN","ROBERT","MICHAEL","WILLIAM","DAVID","RICHARD","CHARLES","JOSEPH","THOMAS","CHRISTOPHER","DANIEL","PAUL","MARK","DONALD","GEORGE","KENNETH","STEVEN","EDWARD","BRIAN","RONALD","ANTHONY","KEVIN","JASON","MATTHEW","GARY","TIMOTHY","JOSE","LARRY","JEFFREY","FRANK","SCOTT","ERIC","STEPHEN","ANDREW","RAYMOND","GREGORY","JOSHUA","JERRY","DENNIS","WALTER","PATRICK","PETER","HAROLD","DOUGLAS","HENRY","CARL","ARTHUR","RYAN","ROGER"],["MARY","PATRICIA","LINDA","BARBARA","ELIZABETH","JENNIFER","MARIA","SUSAN","MARGARET","DOROTHY","LISA","NANCY","KAREN","BETTY","HELEN","SANDRA","DONNA","CAROL","RUTH","SHARON","MICHELLE","LAURA","SARAH","KIMBERLY","DEBORAH","JESSICA","SHIRLEY","CYNTHIA","ANGELA","MELISSA","BRENDA","AMY","ANNA","REBECCA","VIRGINIA","KATHLEEN","PAMELA","MARTHA","DEBRA","AMANDA","STEPHANIE","CAROLYN","CHRISTINE","MARIE","JANET","CATHERINE","FRANCES","ANN","JOYCE","DIANE"]],e=["SMITH","JOHNSON","WILLIAMS","BROWN","JONES","MILLER","DAVIS","GARCIA","RODRIGUEZ","WILSON","MARTINEZ","ANDERSON","TAYLOR","THOMAS","HERNANDEZ","MOORE","MARTIN","JACKSON","THOMPSON","WHITE","LOPEZ","LEE","GONZALEZ","HARRIS","CLARK","LEWIS","ROBINSON","WALKER","PEREZ","HALL","YOUNG","ALLEN","SANCHEZ","WRIGHT","KING","SCOTT","GREEN","BAKER","ADAMS","NELSON","HILL","RAMIREZ","CAMPBELL","MITCHELL","ROBERTS","CARTER","PHILLIPS","EVANS","TURNER","TORRES","PARKER","COLLINS","EDWARDS","STEWART","FLORES","MORRIS","NGUYEN","MURPHY","RIVERA","COOK","ROGERS","MORGAN","PETERSON","COOPER","REED","BAILEY","BELL","GOMEZ","KELLY","HOWARD","WARD","COX","DIAZ","RICHARDSON","WOOD","WATSON","BROOKS","BENNETT","GRAY","JAMES","REYES","CRUZ","HUGHES","PRICE","MYERS","LONG","FOSTER","SANDERS","ROSS","MORALES","POWELL","SULLIVAN","RUSSELL","ORTIZ","JENKINS","GUTIERREZ","PERRY","BUTLER","BARNES","FISHER"];this.leaders_board_test_previous_data=[],this.leaders_board_test_data=[];for(var f=0;f<a;f++){var g={},h=PCB.rng.generate(1),i=PCB.rng.generate(49),j=PCB.rng.generate(99),k=PCB.rng.generate(1e5);g.id=Math.random().toString(36).substr(2,9),g.tag_name=c[h]+" "+e[j]+" "+d[h][i],g.credits=k,g.previous_ranking=!1,this.leaders_board_test_data.push(g)}this.leaders_board_test_data=this.object_array_sort(this.leaders_board_test_data,"credits"),"number"!=typeof b?b=PCB.rng.generate(a-1):b--,this.leaders_board_test_current_player_index_num=Number(b),this.leaders_board_test_data[b].tag_name="MR. BONUS JACKPOT",this.leaders_board_test_data[b].is_player=!0},save_previous_data:function(){this.leaders_board_test_previous_data=JSON.stringify(this.leaders_board_test_data),this.leaders_board_test_previous_data=JSON.parse(this.leaders_board_test_previous_data)},compare_with_prev_data:function(){if(0===this.leaders_board_test_previous_data.length)return!1;for(var a in this.leaders_board_test_data){var b=this.leaders_board_test_data[a].id;this.leaders_board_test_data[a].previous_ranking=this.find_previous_ranking(b)}},find_previous_ranking:function(a){for(var b in this.leaders_board_test_previous_data)if(this.leaders_board_test_previous_data[b].id===a)return Number(b);return!1},output_data_in_console:function(a){for(var b in a)a[b].hasOwnProperty("ranking")&&console.log(a[b].ranking),console.log(a[b].tag_name,a[b].credits,a[b].previous_ranking,a[b].id)},object_array_sort:function(a,b,c,d){var e=-1,f=1;return"asc"===c&&(e=1,f=-1),a=a.sort(function(a,c){var d=a[b],g=c[b];return d>g?e:d<g?f:0})},option_menu_panel_test:function(){this.clearScreen(),PCB.sprite({id:"attendant_button",arguments:!0}),PCB.sprite({id:"options_menu_panel"}),this.setTestScreenText(1,"OPTION MENU PANEL TEST"),Register.debug.spriteInstances.button_blue.visible=!1,Register.debug.spriteInstances.button_yellow.visible=!1,Game.world.bringToTop(Register.debug.groupInstances.button_control),this.buttonCallbacks.button_blue=function(){},PCB.sprite({id:"back_to_game_button",arguments:!0}),PCB.event.add("back_to_game",function(){PCB.audio.play("kurage_kobo","door_close"),PCB.sprite({id:"options_menu_panel",arguments:!1})}),PCB.event.add("settings_menu",function(){PCB.audio.play("kurage_kobo","door_open"),PCB.sprite({id:"options_menu_panel",arguments:!0})});var a=!1;PCB.event.add("sound_mute_toggle",function(){PCB.sprite({id:"button_sound_mute",arguments:a}),a===!0?(a=!1,PCB.audio.play("kurage_kobo","switch")):(a=!0,PCB.audio.play("kurage_kobo","switch"))});var b=!1;PCB.event.add("fullscreen_toggle",function(){PCB.sprite({id:"button_screen_mode",arguments:b}),b===!0?(b=!1,PCB.audio.play("kurage_kobo","switch")):(b=!0,PCB.audio.play("kurage_kobo","switch"))}),PCB.event.add("jukebox_key_type",function(a){var b=Register.spriteInstances.name_input_text_field._text,c=b.length,d="",e=a.charCodeAt(0);if(171==e){if(c<=0)return!1;d=b.substr(0,c-1)}else{if(c>17)return!1;d=b+a}PCB.sprite({id:"name_input_text_field",arguments:d}),PCB.audio.play("key_type")}),PCB.event.trigger("settings_menu")},ad_provider_test:function(){this.clearScreen(),this.setTestScreenText(3,"AD PROVIDER TEST"),this.setTestScreenText(10,"PRESS BLUE BUTTON TO TEST AD"),Register.debug.spriteInstances.button_blue.visible=!0,Register.debug.spriteInstances.button_yellow.visible=!1,Game.world.bringToTop(Register.debug.groupInstances.button_control);var a=this;this.buttonCallbacks.button_blue=function(){""===Register.adProvider_url?a.setTestScreenText(10,"ADPROVIDER URL NOT SET"):(a.setTestScreenText(10,"AD STARTED"),PCB.adProvider.requestAd())},PCB.event.add("adFinished",function(){a.setTestScreenText(10,"AD FINISHED")})},ad_banner_test:function(){this.clearScreen(),this.setTestScreenText(3,"AD BANNER TEST"),this.setTestScreenText(10,"PRESS BLUE BUTTON TO TEST AD"),Register.debug.spriteInstances.button_blue.visible=!0,Register.debug.spriteInstances.button_yellow.visible=!1,Game.world.bringToTop(Register.debug.groupInstances.button_control);var a=this;this.buttonCallbacks.button_blue=function(){a.setTestScreenText(10,"AD STARTED"),PCB.adBanner.showAd()},PCB.event.add("adBannerFinished",function(){a.setTestScreenText(10,"AD FINISHED")})},network_test:function(){this.clearScreen(),this.setTestScreenText(3,"NETWORK TEST"),this.setTestScreenText(7,"PRESS BLUE BUTTON TO START"),Register.debug.spriteInstances.button_blue.visible=!0,Register.debug.spriteInstances.button_yellow.visible=!1,Game.world.bringToTop(Register.debug.groupInstances.button_control);var a,b,c=this;this.buttonCallbacks.button_blue=function(){c.setTestScreenText(12,""),c.setTestScreenText(14,""),
c.setTestScreenText(15,""),c.setTestScreenText(16,""),""===Register.play_be_net_url?c.setTestScreenText(10,"PLAYBE URL NOT SET"):(c.setTestScreenText(20,"TEST STARTED"),PCB.network.sendRequest({ajax_command:"test",serial_number:Register.serial_number}),a=new Date)},PCB.event.add("onNetworkSuccess",function(d){b=new Date;var e=b-a;c.setTestScreenText(20,"COMMUNICATION TIME : "+e+" MS");var f=PCB.network.parseResponse(d);f!==!1&&(c.setTestScreenText(12,"LICENSE CODE : "+f.serial_number),c.setTestScreenText(14,"SERVER LOAD (01 MIN): "+f.server_load[0]),c.setTestScreenText(15,"SERVER LOAD (05 MIN): "+f.server_load[1]),c.setTestScreenText(16,"SERVER LOAD (15 MIN): "+f.server_load[2]),c.setTestScreenText(18,"REQUEST FREQ. : "+f.request_frequency+" SEC."))}),PCB.event.add("onNetworkServerError",function(){c.setTestScreenText(10,"SERVER ERROR")}),PCB.event.add("onNetworkError",function(){c.setTestScreenText(10,"NETWORK ERROR")})},nextScreen:function(){this.currentScreen>this.screenOrders.length-2?this.currentScreen=0:this.currentScreen++,this.clearScreen();var a=this.screenOrders[this.currentScreen];this[a]()},clearScreen:function(){PCB.clock.removeAll(),PCB.event.removeAll();for(var a in Register.spriteInstances)Register.spriteInstances[a]&&Object.keys(Register.spriteInstances[a]).length&&Register.spriteInstances[a].destroy();for(var a in Register.groupInstances)Register.groupInstances[a]&&Object.keys(Register.groupInstances[a]).length&&Register.groupInstances[a].destroy();Register.spriteInstances={},Register.groupInstances={},PCB.sprite({destroy_all:!0});for(var a in Register.keyinputInstances)delete Register.keyinputInstances[a];Game.input.keyboard.reset(),Register.keyinputInstances={},this.currentSound=0,Game.state.update=function(){},PCB.reels.removeReel(),this.buttonCallbacks.button_yellow=function(){},this.buttonCallbacks.button_blue=function(){},this.pointer_test=!1,Game.debug.reset()},setTestScreenText:function(a,b,c){var d="line_"+a;return Register.spriteInstances[d]?void Register.spriteInstances[d].setText(b):(c||(c={font:"24px Skranji",fill:"#ea134b",stroke:"#FFFFFF",strokeThickness:3,boundsAlignH:"center",boundsAlignV:"middle"}),Register.spriteInstances[d]=Game.add.text(0,0,b,c),void Register.spriteInstances[d].setTextBounds(0,24*a,Game.width,24))},bringToTop_buttons:function(){Game.world.bringToTop(Register.groupInstances.button_control)},buttonInput:function(a){var b=a.key;this.buttonCallbacks[b]()},nextSound:function(){var a=Object.keys(this.audioAssetList)[this.currentSound],b=this.audioAssetList[a];PCB.audio.stop(),""!==b?(_currentSound=Register.audioInstances[b],_currentSound.play(a)):(_currentSound=Register.audioInstances[a],_currentSound.play()),Register.spriteInstances.line_20.setText("Sound : "+a),this.currentSound>Object.keys(this.audioAssetList).length-2?this.currentSound=0:this.currentSound++},constructAudioAssetList:function(){for(var a in Register.audioInstances)if(Register.audioInstances[a].hasOwnProperty("sounds"))for(var b in Register.audioInstances[a].sounds)this.audioAssetList[b]=a;else this.audioAssetList[a]=""},toDoubleDigits:function(a){return a+="",1===a.length&&(a="0"+a),a}};